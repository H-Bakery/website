# API Documentation: Intern Orders

This document outlines the API endpoints and data structures for managing Intern Orders within the bakery management system.

## Data Model: `InternOrder`

The `InternOrder` object has the following structure:

```json
{
  "id": "string", // Unique identifier (e.g., UUID, generated by backend)
  "orderName": "string", // Name of the order (e.g., "Market Order KW32")
  "description": "string", // Detailed description of the order
  "quantity": "number", // Optional: General quantity if items are not broken down
  "items": [ // Optional: For orders with multiple distinct items
    {
      "itemName": "string",
      "itemQuantity": "number",
      "unit": "string" // Optional: e.g., kg, pcs, box
    }
  ],
  "status": "string", // Enum: 'pending', 'in-progress', 'done', 'cancelled'
  "assignedTo": "string", // Optional: Name or ID of the person/role responsible
  "billImageUrl": "string", // Optional: URL to the uploaded bill image
  "createdAt": "string", // ISO 8601 date-time string (generated by backend)
  "updatedAt": "string", // ISO 8601 date-time string (generated by backend)
  "createdBy": "string" // Optional: Name or ID of the user who created the order
}
```

## API Endpoints

All endpoints are prefixed with `/api`.

### 1. Get All Intern Orders

*   **Endpoint:** `GET /intern-orders`
*   **Description:** Retrieves a list of all intern orders.
*   **Query Parameters (Optional):**
    *   `status=<status>`: Filter by status (e.g., `status=pending`).
    *   `assignedTo=<name_or_id>`: Filter by assignee.
    *   `sortBy=<field>`: Field to sort by (e.g., `sortBy=createdAt`).
    *   `sortOrder=<asc|desc>`: Sort order.
*   **Success Response:**
    *   **Code:** `200 OK`
    *   **Content:** `InternOrder[]`
    ```json
    [
      {
        "id": "order-001",
        "orderName": "Weekly Market Stock Replenish",
        "description": "Restock vegetables, fruits, and packaging...",
        "status": "pending",
        "assignedTo": "John Doe",
        "createdAt": "2023-10-27T10:00:00Z",
        "updatedAt": "2023-10-27T10:00:00Z",
        "items": [
          { "itemName": "Carrots", "itemQuantity": 10, "unit": "kg" }
        ]
      }
      // ... more orders
    ]
    ```

### 2. Create New Intern Order

*   **Endpoint:** `POST /intern-orders`
*   **Description:** Creates a new intern order.
*   **Request Body:** `Omit<InternOrder, 'id' | 'createdAt' | 'updatedAt'>`
    ```json
    {
      "orderName": "Urgent Flour Delivery",
      "description": "Need 50kg of Type 550 flour.",
      "status": "pending", // Or backend defaults to 'pending'
      "assignedTo": "Jane Smith",
      "quantity": 50,
      "createdBy": "Chef Baker"
    }
    ```
*   **Success Response:**
    *   **Code:** `201 Created`
    *   **Content:** `InternOrder` (the newly created order with `id`, `createdAt`, `updatedAt` populated)
    ```json
    {
      "id": "order-002",
      "orderName": "Urgent Flour Delivery",
      "description": "Need 50kg of Type 550 flour.",
      "status": "pending",
      "assignedTo": "Jane Smith",
      "quantity": 50,
      "createdAt": "2023-10-28T14:30:00Z",
      "updatedAt": "2023-10-28T14:30:00Z",
      "createdBy": "Chef Baker"
    }
    ```

### 3. Get Intern Order by ID

*   **Endpoint:** `GET /intern-orders/{id}`
*   **Description:** Retrieves a specific intern order by its ID.
*   **Success Response:**
    *   **Code:** `200 OK`
    *   **Content:** `InternOrder`
*   **Error Response:**
    *   **Code:** `404 Not Found`

### 4. Update Intern Order

*   **Endpoint:** `PUT /intern-orders/{id}`
*   **Description:** Updates an existing intern order.
*   **Request Body:** `Partial<Omit<InternOrder, 'id' | 'createdAt' | 'updatedAt'>>`
    ```json
    {
      "status": "done",
      "billImageUrl": "/uploads/bills/bill_order_002.jpg" // URL returned by file upload endpoint
    }
    ```
*   **Success Response:**
    *   **Code:** `200 OK`
    *   **Content:** `InternOrder` (the updated order)
*   **Error Response:**
    *   **Code:** `404 Not Found`

### 5. Delete Intern Order

*   **Endpoint:** `DELETE /intern-orders/{id}`
*   **Description:** Deletes an intern order.
*   **Success Response:**
    *   **Code:** `204 No Content`
*   **Error Response:**
    *   **Code:** `404 Not Found`

## Bill Image Upload

*   **Endpoint:** `POST /intern-orders/upload-bill` (or a more generic `/uploads/image`)
*   **Description:** Uploads a bill image. The frontend expects this endpoint to return a URL to the uploaded image.
*   **Request:** `multipart/form-data` with a file field (e.g., `billImage`).
*   **Success Response:**
    *   **Code:** `200 OK` (or `201 Created`)
    *   **Content:**
        ```json
        {
          "imageUrl": "/uploads/bills/some_unique_filename.jpg"
        }
        ```
*   **Note:** The `billImageUrl` field in the `InternOrder` object should then be updated with this URL via the `PUT /intern-orders/{id}` endpoint. Alternatively, the backend could handle associating the image directly if the order ID is passed during upload.
