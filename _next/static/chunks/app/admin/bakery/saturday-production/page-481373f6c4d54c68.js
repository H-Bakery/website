(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7053],{32658:(e,n,i)=>{Promise.resolve().then(i.bind(i,94467))},94467:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>X});var t=i(95155),s=i(12115),l=i(73746),r=i(36054),a=i(63159),c=i(16150),o=i(9670),d=i(18203),h=i(90746),x=i(44146),g=i(44557),u=i(80460),A=i(60538),j=i(41790),m=i(67636),p=i(3540),f=i(46455),b=i(26877),y=i(88622),k=i(98358),P=i(90912),v=i(32582),z=i(84256),S=i(83339),B=i(91580),C=i(25949),w=i(57236),O=i(3967),F=i(33470),H=i(9815),D=i(2532),N=i(75713),E=i(57657),I=i(14459);let M=e=>{switch(e){case"nuss":return"Nussf\xfcllung";case"schoko":return"Schokof\xfcllung";case"pudding":return"Puddingf\xfcllung";case"marzipan":return"Marzipanf\xfcllung";default:return e}};class W{calculateProductionNeeds(e){let n=0,i={},t={nuss:0,schoko:0,pudding:0,marzipan:0};Object.entries(e).forEach(e=>{let[s,l]=e;if(this.recipes[s]){let e=this.recipes[s],r=e.doughPerPiece*l;n+=r;let a="".concat(e.doughPerPiece,"g");i[a]=(i[a]||0)+l,e.filling&&e.fillingAmount&&(t[e.filling]+=e.fillingAmount*l)}});let s=Math.ceil(n/this.standardBatchSize),l={};return Object.entries(t).forEach(e=>{let[n,i]=e;l[n]=Math.ceil(i/this.standardFillingBatchSize)}),{totalDoughWeight:n,doughPieces:i,doughBatches:s,fillings:t,fillingBatches:l,calculator:this}}constructor(){this.recipes={"Hefezopf Plain":{doughPieces:1,doughPerPiece:500},"Hefekranz Nuss":{doughPieces:1,doughPerPiece:400,filling:"nuss",fillingAmount:250},"Hefekranz Schoko":{doughPieces:1,doughPerPiece:400,filling:"schoko",fillingAmount:250},"Hefekranz Pudding":{doughPieces:1,doughPerPiece:400,filling:"pudding",fillingAmount:300},"Hefekranz Marzipan":{doughPieces:1,doughPerPiece:400,filling:"marzipan",fillingAmount:200},"Mini Hefezopf":{doughPieces:1,doughPerPiece:250},"Hefeschnecken Nuss":{doughPieces:1,doughPerPiece:80,filling:"nuss",fillingAmount:50},"Hefeschnecken Schoko":{doughPieces:1,doughPerPiece:80,filling:"schoko",fillingAmount:50}},this.standardBatchSize=5e3,this.standardFillingBatchSize=2e3}}let T=e=>{let{orders:n,onOrderChange:i,date:s}=e,a=(0,l.A)(),g=(0,r.A)(a.breakpoints.down("sm")),u=new W,A=u.calculateProductionNeeds(n),j=(e,n)=>{let t=parseInt(n,10)||0;t>=0&&i(e,t)},m=e=>{let t=n[e]||0;i(e,t+1)},p=e=>{let t=n[e]||0;t>0&&i(e,t-1)};return(0,t.jsxs)(c.A,{className:"production-dashboard",children:[(0,t.jsxs)(c.A,{sx:{mb:2,display:"flex",justifyContent:"flex-end",gap:1},children:[(0,t.jsx)(x.A,{onClick:()=>{localStorage.setItem("bakery-plan-".concat(s),JSON.stringify({orders:n,plan:A,date:s})),alert("Produktionsplan gespeichert!")},color:"primary","aria-label":"Plan speichern",size:g?"small":"medium",children:(0,t.jsx)(E.A,{})}),(0,t.jsx)(x.A,{onClick:()=>{window.print()},color:"secondary","aria-label":"Plan drucken",size:g?"small":"medium",children:(0,t.jsx)(I.A,{})})]}),(0,t.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,t.jsx)(h.Ay,{item:!0,xs:6,children:(0,t.jsxs)(d.A,{sx:{p:2,textAlign:"center",bgcolor:"primary.main",color:"white"},children:[(0,t.jsx)(o.A,{variant:"h4",children:A.doughBatches}),(0,t.jsx)(o.A,{variant:"body2",children:"Teigchargen"})]})}),(0,t.jsx)(h.Ay,{item:!0,xs:6,children:(0,t.jsxs)(d.A,{sx:{p:2,textAlign:"center",bgcolor:"secondary.main",color:"white"},children:[(0,t.jsxs)(o.A,{variant:"h4",children:[(A.totalDoughWeight/1e3).toFixed(1)," kg"]}),(0,t.jsx)(o.A,{variant:"body2",children:"Gesamtgewicht"})]})})]}),(0,t.jsxs)(y.A,{defaultExpanded:!0,children:[(0,t.jsx)(k.A,{expandIcon:(0,t.jsx)(N.A,{}),children:(0,t.jsx)(o.A,{fontWeight:"bold",children:"Bestellmengen anpassen"})}),(0,t.jsx)(P.A,{children:(0,t.jsx)(h.Ay,{container:!0,spacing:1,children:Object.entries(u.recipes).map(e=>{let[i,s]=e;return(0,t.jsx)(h.Ay,{item:!0,xs:12,children:(0,t.jsxs)(d.A,{sx:{p:1.5,display:"flex",alignItems:"center"},children:[(0,t.jsxs)(c.A,{flexGrow:1,children:[(0,t.jsx)(o.A,{variant:"body1",children:i}),(0,t.jsxs)(o.A,{variant:"caption",color:"text.secondary",children:[s.doughPerPiece,"g Teig",s.filling&&" + ".concat(s.fillingAmount,"g ").concat(M(s.filling))]})]}),(0,t.jsxs)(c.A,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(x.A,{size:"small",onClick:()=>p(i),"aria-label":"".concat(i," verringern"),children:(0,t.jsx)(D.A,{fontSize:"small"})}),(0,t.jsx)(v.A,{value:n[i]||0,onChange:e=>j(i,e.target.value),inputProps:{min:0,style:{textAlign:"center",width:"40px",padding:"8px 4px"}},variant:"outlined",size:"small","aria-label":"".concat(i," Menge")}),(0,t.jsx)(x.A,{size:"small",onClick:()=>m(i),"aria-label":"".concat(i," erh\xf6hen"),children:(0,t.jsx)(H.A,{fontSize:"small"})})]})]})},i)})})})]}),(0,t.jsxs)(y.A,{defaultExpanded:!0,sx:{mt:2},children:[(0,t.jsx)(k.A,{expandIcon:(0,t.jsx)(N.A,{}),children:(0,t.jsx)(o.A,{fontWeight:"bold",children:"Hefeteigproduktion"})}),(0,t.jsx)(P.A,{children:(0,t.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,t.jsx)(h.Ay,{item:!0,xs:12,children:(0,t.jsx)(z.A,{sx:{mb:2},children:(0,t.jsxs)(S.A,{children:[(0,t.jsxs)(o.A,{variant:"subtitle1",gutterBottom:!0,children:["Teigchargen (",A.doughBatches,"):"]}),Array(A.doughBatches).fill(0).map((e,n)=>(0,t.jsx)(B.A,{label:"Charge ".concat(n+1,": ").concat((A.totalDoughWeight/A.doughBatches/1e3).toFixed(1)," kg"),sx:{m:.5},color:"primary",variant:"outlined"},n))]})})}),(0,t.jsx)(h.Ay,{item:!0,xs:12,children:(0,t.jsx)(z.A,{children:(0,t.jsxs)(S.A,{children:[(0,t.jsx)(o.A,{variant:"subtitle1",gutterBottom:!0,children:"Teigst\xfccke vorbereiten:"}),(0,t.jsx)(C.A,{size:"small",children:(0,t.jsx)(w.A,{children:Object.entries(A.doughPieces).map(e=>{let[n,i]=e;return(0,t.jsxs)(O.A,{children:[(0,t.jsx)(F.A,{sx:{py:1},children:(0,t.jsx)(o.A,{variant:"body2",children:n})}),(0,t.jsx)(F.A,{align:"right",sx:{py:1},children:(0,t.jsx)(B.A,{label:"".concat(i," Stk"),size:"small",color:"secondary"})})]},n)})})})]})})})]})})]}),(0,t.jsxs)(y.A,{sx:{mt:2},children:[(0,t.jsxs)(k.A,{expandIcon:(0,t.jsx)(N.A,{}),children:[(0,t.jsx)(o.A,{fontWeight:"bold",children:"F\xfcllungen"}),Object.values(A.fillingBatches).some(e=>e>0)&&(0,t.jsx)(B.A,{size:"small",label:Object.values(A.fillings).reduce((e,n)=>e+n,0)/1e3+" kg",color:"info",sx:{ml:1}})]}),(0,t.jsx)(P.A,{children:Object.entries(A.fillingBatches).some(e=>{let[n,i]=e;return i>0})?(0,t.jsx)(h.Ay,{container:!0,spacing:2,children:Object.entries(A.fillingBatches).map(e=>{let[n,i]=e;return i>0?(0,t.jsx)(h.Ay,{item:!0,xs:12,children:(0,t.jsxs)(d.A,{sx:{p:1.5},children:[(0,t.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:M(n)}),(0,t.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)(B.A,{label:"".concat(i," Charge").concat(i>1?"n":""),size:"small",color:"primary",variant:"outlined"}),(0,t.jsx)(B.A,{label:"".concat((A.fillings[n]/1e3).toFixed(1)," kg"),size:"small",color:"secondary"})]})]})},n):null})}):(0,t.jsx)(o.A,{variant:"body2",sx:{py:2,textAlign:"center"},children:"Keine F\xfcllungen f\xfcr diesen Produktionsplan ben\xf6tigt."})})]})]})};var Z=i(80158),_=i(76898),G=i(43388);let K=e=>{let{orders:n,date:i}=e,s=new W().calculateProductionNeeds(n);return(0,t.jsxs)(d.A,{sx:{p:3},className:"production-checklist",children:[(0,t.jsxs)(c.A,{textAlign:"center",mb:3,children:[(0,t.jsx)(o.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Produktions-Checkliste f\xfcr Samstag"}),(0,t.jsx)(o.A,{variant:"h6",component:"h2",children:new Date(i).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)(c.A,{mb:4,children:[(0,t.jsxs)(o.A,{variant:"h5",component:"h3",gutterBottom:!0,children:["1. Hefeteig Vorbereitung (",s.doughBatches," Chargen)"]}),(0,t.jsx)(Z.A,{sx:{mb:2}}),(0,t.jsx)(h.Ay,{container:!0,spacing:2,children:Array(s.doughBatches).fill(0).map((e,n)=>(0,t.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,t.jsx)(_.A,{control:(0,t.jsx)(G.A,{}),label:"Hefeteig Charge ".concat(n+1," (").concat((s.totalDoughWeight/s.doughBatches/1e3).toFixed(1)," kg)")})},"dough-".concat(n)))})]}),(0,t.jsxs)(c.A,{mb:4,children:[(0,t.jsx)(o.A,{variant:"h5",component:"h3",gutterBottom:!0,children:"2. Teigst\xfccke Portionieren"}),(0,t.jsx)(Z.A,{sx:{mb:2}}),(0,t.jsx)(h.Ay,{container:!0,spacing:2,children:Object.entries(s.doughPieces).map(e=>{let[n,i]=e;return(0,t.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,t.jsx)(_.A,{control:(0,t.jsx)(G.A,{}),label:"".concat(i,"\xd7}\xd7 Teigst\xfccke zu ").concat(n)})},"pieces-".concat(n))})})]}),(0,t.jsxs)(c.A,{mb:4,children:[(0,t.jsx)(o.A,{variant:"h5",component:"h3",gutterBottom:!0,children:"3. F\xfcllungen Zubereiten"}),(0,t.jsx)(Z.A,{sx:{mb:2}}),Object.entries(s.fillingBatches).length>0?(0,t.jsx)(h.Ay,{container:!0,spacing:2,children:Object.entries(s.fillingBatches).map(e=>{let[n,i]=e;return i>0?(0,t.jsx)(h.Ay,{item:!0,xs:12,children:(0,t.jsx)(_.A,{control:(0,t.jsx)(G.A,{}),label:"".concat(M(n),": ").concat(i," Charge(n) (").concat((s.fillings[n]/1e3).toFixed(1)," kg)")})},"filling-".concat(n)):null})}):(0,t.jsx)(o.A,{children:"Keine F\xfcllungen f\xfcr diesen Produktionsplan ben\xf6tigt."})]}),(0,t.jsxs)(c.A,{mb:4,children:[(0,t.jsx)(o.A,{variant:"h5",component:"h3",gutterBottom:!0,children:"4. Endprodukte Herstellen"}),(0,t.jsx)(Z.A,{sx:{mb:2}}),(0,t.jsx)(h.Ay,{container:!0,spacing:2,children:Object.entries(n).map(e=>{let[n,i]=e;return(0,t.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsx)(_.A,{control:(0,t.jsx)(G.A,{}),label:"".concat(i,"\xd7 ").concat(n)})},"product-".concat(n))})})]})]})};var V=i(9520),L=i(95439),J=i(14995),q=i(34152);let Q={nuss:{"Gemahlene Haseln\xfcsse":500,Zucker:300,Butter:250,Zimtpulver:15,Eigelb:2},schoko:{"Schokolade (Zartbitter)":400,Butter:200,Zucker:150,Kakao:50,Sahne:100},pudding:{"Puddingpulver (Vanille)":80,Zucker:150,Milch:500,Butter:100,Vanillezucker:16},marzipan:{Marzipanrohmasse:450,Zucker:100,Butter:100,Ei:1,"Geriebene Zitronenschale":5}},R=e=>{let{productionPlan:n,orders:i,onOrderChange:l}=e,[r,a]=(0,s.useState)(null),[g,u]=(0,s.useState)(!1),A=Object.entries(n.fillingBatches).filter(e=>{let[n,i]=e;return i>0}).map(e=>{let[n,i]=e;return n}),j=(e,n)=>{if(!Q[e])return{};let i=Q[e],t={};return Object.entries(i).forEach(e=>{let[i,s]=e;"number"==typeof s?t[i]=Math.round(s*n):"string"==typeof s?t[i]="".concat(s," (\xd7").concat(n,")"):t[i]=s}),t},m=e=>{a(e===r?null:e)},p=(e,n)=>{let t=Math.max(0,(i[e]||0)+n);l(e,t)};return(0,t.jsxs)(c.A,{className:"filling-preparation",children:[(0,t.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"F\xfcllungen f\xfcr Samstagsproduktion"}),0===A.length?(0,t.jsx)(d.A,{sx:{p:3,textAlign:"center"},children:(0,t.jsx)(o.A,{children:"Keine F\xfcllungen f\xfcr diesen Produktionsplan ben\xf6tigt."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:A.map(e=>(0,t.jsx)(h.Ay,{item:!0,xs:12,children:(0,t.jsx)(d.A,{sx:{p:2,cursor:"pointer",border:r===e?"2px solid #1976d2":"none"},onClick:()=>m(e),children:(0,t.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)(c.A,{children:[(0,t.jsx)(o.A,{variant:"h6",children:M(e)}),(0,t.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:[n.fillingBatches[e]," Charge(n) (",(n.fillings[e]/1e3).toFixed(1)," ","kg)"]})]}),(0,t.jsx)(B.A,{label:r===e?"Ausgew\xe4hlt":"Details",color:r===e?"primary":"default",size:"small"})]})})},e))}),r&&(0,t.jsx)(z.A,{sx:{mb:3},children:(0,t.jsxs)(S.A,{children:[(0,t.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:[M(r)," - Zutaten"]}),(0,t.jsx)(_.A,{control:(0,t.jsx)(V.A,{checked:g,onChange:e=>u(e.target.checked),size:"small"}),label:"Alle F\xfcllungen anzeigen"}),(0,t.jsx)(Z.A,{sx:{my:2}}),(0,t.jsx)(C.A,{size:"small",children:(0,t.jsx)(w.A,{children:Object.entries(j(r,n.fillingBatches[r])).map(e=>{let[n,i]=e;return(0,t.jsxs)(O.A,{children:[(0,t.jsx)(F.A,{children:n}),(0,t.jsx)(F.A,{align:"right",children:"number"==typeof i?i>=1e3?"".concat((i/1e3).toFixed(1)," kg"):"".concat(i," g"):"".concat(i," Stk")})]},n)})})}),g&&(0,t.jsxs)(c.A,{sx:{mt:3},children:[(0,t.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:"Alle F\xfcllungen kombiniert:"}),(0,t.jsx)(C.A,{size:"small",children:(0,t.jsx)(w.A,{children:Object.entries(A.reduce((e,i)=>(Object.entries(j(i,n.fillingBatches[i])).forEach(n=>{let[i,t]=n;"number"==typeof t&&(e[i]=(e[i]||0)+t)}),e),{})).map(e=>{let[n,i]=e;return(0,t.jsxs)(O.A,{children:[(0,t.jsx)(F.A,{children:n}),(0,t.jsx)(F.A,{align:"right",children:"number"==typeof i?i>=1e3?"".concat((i/1e3).toFixed(1)," kg"):"".concat(i," g"):"".concat(i," Stk")})]},n)})})})]}),(0,t.jsx)(Z.A,{sx:{my:2}}),(0,t.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:"Produkte mit dieser F\xfcllung:"}),(0,t.jsx)(L.A,{disablePadding:!0,children:Object.entries((n.calculator||{recipes:{}}).recipes).filter(e=>{let[n,i]=e;return i.filling===r}).map(e=>{let[n,i]=e;return n}).map(e=>(0,t.jsx)(J.Ay,{disablePadding:!0,sx:{mb:1},children:(0,t.jsxs)(d.A,{sx:{p:1,width:"100%",display:"flex",alignItems:"center"},children:[(0,t.jsx)(q.A,{primary:e,secondary:"Aktuell: ".concat(i[e]||0," Stk"),primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}}),(0,t.jsxs)(c.A,{children:[(0,t.jsx)(x.A,{size:"small",onClick:()=>p(e,-1),disabled:0>=(i[e]||0),children:(0,t.jsx)(D.A,{fontSize:"small"})}),(0,t.jsx)(x.A,{size:"small",onClick:()=>p(e,1),children:(0,t.jsx)(H.A,{fontSize:"small"})})]})]})},e))})]})})]})]})},U={"Hefezopf Plain":12,"Hefekranz Nuss":6,"Hefekranz Schoko":8,"Hefekranz Pudding":3,"Hefekranz Marzipan":2,"Mini Hefezopf":15,"Hefeschnecken Nuss":20,"Hefeschnecken Schoko":18};function X(){let e=(0,l.A)(),n=(0,r.A)(e.breakpoints.down("sm")),[i,y]=(0,s.useState)(0),[k,P]=(0,s.useState)(0),[v,z]=(0,s.useState)([]),[S,B]=(0,s.useState)(U),[C,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=[],n=new Date,i=n.getDay(),t=new Date(n);t.setDate(n.getDate()+((6-i+7)%7||7));for(let n=0;n<8;n++){let i=new Date(t);i.setDate(t.getDate()+7*n);let s=i.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"short",year:"numeric"}),l=i.toISOString().split("T")[0];e.push({date:i,display:s,dateStr:l})}z(e)},[]),(0,s.useEffect)(()=>{w(new W().calculateProductionNeeds(S))},[S]);let O=(e,n)=>{B({...S,[e]:n})},F=v[k],H=(null==F?void 0:F.dateStr)||"",D=(null==F?void 0:F.display)||"";return(0,t.jsxs)(a.A,{maxWidth:"xl",sx:{py:2,px:{xs:1,sm:2}},children:[(0,t.jsx)(c.A,{sx:{mb:2},children:(0,t.jsx)(o.A,{variant:"h5",component:"h1",fontWeight:"bold",children:"Samstag Spezialproduktion"})}),(0,t.jsx)(d.A,{sx:{p:2,mb:3},children:(0,t.jsxs)(h.Ay,{container:!0,alignItems:"center",spacing:1,children:[(0,t.jsx)(h.Ay,{item:!0,xs:2,children:(0,t.jsx)(x.A,{onClick:()=>{k>0&&P(k-1)},disabled:0===k,"aria-label":"Vorheriger Samstag",children:(0,t.jsx)(A.A,{})})}),(0,t.jsx)(h.Ay,{item:!0,xs:8,children:(0,t.jsxs)(c.A,{textAlign:"center",children:[(0,t.jsxs)(o.A,{variant:"subtitle2",color:"text.secondary",sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,t.jsx)(m.A,{fontSize:"small",sx:{mr:.5}}),"Produktionstag"]}),(0,t.jsx)(o.A,{variant:"h6",fontWeight:"bold",noWrap:!0,children:D})]})}),(0,t.jsx)(h.Ay,{item:!0,xs:2,sx:{textAlign:"right"},children:(0,t.jsx)(x.A,{onClick:()=>{k<v.length-1&&P(k+1)},disabled:k===v.length-1,"aria-label":"N\xe4chster Samstag",children:(0,t.jsx)(j.A,{})})})]})}),(0,t.jsx)(c.A,{sx:{mb:2},children:(0,t.jsxs)(g.A,{value:i,onChange:(e,n)=>{y(n)},variant:"fullWidth","aria-label":"Produktionsplan Tabs",children:[(0,t.jsx)(u.A,{icon:n?(0,t.jsx)(b.A,{}):void 0,label:n?void 0:"Produktion",iconPosition:"top","aria-label":"Produktionsplan"}),(0,t.jsx)(u.A,{icon:n?(0,t.jsx)(f.A,{}):void 0,label:n?void 0:"F\xfcllungen",iconPosition:"top","aria-label":"F\xfcllungszubereitung"}),(0,t.jsx)(u.A,{icon:n?(0,t.jsx)(p.A,{}):void 0,label:n?void 0:"Checkliste",iconPosition:"top","aria-label":"Checkliste"})]})}),(0,t.jsxs)(c.A,{children:[0===i&&(0,t.jsx)(T,{orders:S,onOrderChange:O,date:H}),1===i&&C&&(0,t.jsx)(R,{productionPlan:C,orders:S,onOrderChange:O}),2===i&&(0,t.jsx)(K,{orders:S,date:H})]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[8460,9670,7009,752,4756,413,2502,1580,5183,9152,2582,6277,4737,5320,9520,3792,3389,8441,1684,7358],()=>n(32658)),_N_E=e.O()}]);