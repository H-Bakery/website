(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4798],{22657:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(95155),s=n(12115),l=n(18203),r=n(16150),a=n(9670),o=n(32582),d=n(70680),c=n(15876),x=n(25949),h=n(72137),u=n(3967),m=n(33470),A=n(57236),p=n(63690),j=n(86192);let g=e=>{let{title:t,subtitle:n,columns:g,data:y,searchEnabled:b=!1,emptyMessage:f="No data available"}=e,[v,k]=(0,s.useState)(0),[C,P]=(0,s.useState)(5),[S,w]=(0,s.useState)(""),W=b&&S?y.filter(e=>Object.values(e).some(e=>null!=e&&e.toString().toLowerCase().includes(S.toLowerCase()))):y,I=W.slice(v*C,v*C+C);return(0,i.jsxs)(l.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,i.jsxs)(r.A,{sx:{p:2,pb:b?1:2},children:[(0,i.jsx)(a.A,{variant:"h6",component:"h3",children:t}),n&&(0,i.jsx)(a.A,{variant:"body2",color:"text.secondary",children:n}),b&&(0,i.jsx)(o.A,{margin:"dense",placeholder:"Search...",fullWidth:!0,variant:"outlined",size:"small",value:S,onChange:e=>w(e.target.value),InputProps:{startAdornment:(0,i.jsx)(d.A,{position:"start",children:(0,i.jsx)(j.A,{})})},sx:{mt:1}})]}),(0,i.jsx)(c.A,{sx:{flexGrow:1,overflow:"auto"},children:(0,i.jsxs)(x.A,{stickyHeader:!0,"aria-label":"".concat(t," table"),size:"small",children:[(0,i.jsx)(h.A,{children:(0,i.jsx)(u.A,{children:g.map(e=>(0,i.jsx)(m.A,{align:e.align,style:{minWidth:e.minWidth,fontWeight:"bold"},children:e.label},e.id))})}),(0,i.jsx)(A.A,{children:I.length>0?I.map((e,t)=>(0,i.jsx)(u.A,{hover:!0,tabIndex:-1,children:g.map(t=>{let n=e[t.id];return(0,i.jsx)(m.A,{align:t.align,children:t.format?t.format(n):n},t.id)})},t)):(0,i.jsx)(u.A,{children:(0,i.jsx)(m.A,{colSpan:g.length,align:"center",children:f})})})]})}),(0,i.jsx)(p.A,{rowsPerPageOptions:[5,10,25],component:"div",count:W.length,rowsPerPage:C,page:v,onPageChange:(e,t)=>{k(t)},onRowsPerPageChange:e=>{P(+e.target.value),k(0)}})]})}},33461:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(95155),s=n(55857);n(12115);let l=e=>{let{children:t,...n}=e;return(0,i.jsx)(s.A,{variant:"contained",...n,children:t})}},45737:(e,t,n)=>{Promise.resolve().then(n.bind(n,75845))},75845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eM});var i=n(95155),s=n(12115),l=n(73746),r=n(36054),a=n(63159),o=n(89915),d=n(91580),c=n(16150),x=n(19494),h=n(9670),u=n(51877),m=n(77498),A=n(80329),p=n(26403),j=n(50095),g=n(55857),y=n(18203),b=n(56278),f=n(44557),v=n(80460),k=n(62861),C=n(62966),P=n(12422),S=n(42921),w=n(78679),W=n(35695),I=n(9815),z=n(57251),D=n(92425),B=n(69841),E=n(33622),N=n(81788),M=n(33461),X=n(22657),F=n(78946),q=n(90746),H=n(32582),G=n(80158),O=n(95439),R=n(14995),L=n(44146),T=n(34152),K=n(30651),U=n(85811);let $=e=>{let{products:t,order:n,onSave:l,onCancel:r}=e,[a,o]=(0,s.useState)({customerName:(null==n?void 0:n.customerName)||"",customerPhone:(null==n?void 0:n.customerPhone)||"",customerEmail:(null==n?void 0:n.customerEmail)||"",pickupDate:(e=>e?(e instanceof Date?e:new Date(e)).toISOString().slice(0,16):new Date(Date.now()+864e5).toISOString().slice(0,16))(null==n?void 0:n.pickupDate),status:(null==n?void 0:n.status)||"Pending",notes:(null==n?void 0:n.notes)||"",items:(null==n?void 0:n.items)?[...n.items]:[],totalPrice:(null==n?void 0:n.totalPrice)||0}),[d,x]=(0,s.useState)({productId:"",productName:"",quantity:1,unitPrice:0});(0,s.useEffect)(()=>{let e=(Array.isArray(a.items)?a.items:[]).reduce((e,t)=>e+t.quantity*t.unitPrice,0);o(t=>({...t,totalPrice:parseFloat(e.toFixed(2))}))},[a.items]);let u=e=>{let{name:t,value:n}=e.target;o({...a,[t]:n})},b=e=>{let t=[...a.items];t.splice(e,1),o({...a,items:t})};return(0,i.jsxs)(y.A,{sx:{p:3,mb:4},children:[(0,i.jsx)(h.A,{variant:"h5",gutterBottom:!0,children:n?"Edit Order":"New Order"}),(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),l(a)},children:(0,i.jsxs)(q.Ay,{container:!0,spacing:3,children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,children:(0,i.jsx)(h.A,{variant:"h6",sx:{mb:2},children:"Customer Information"})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(H.A,{required:!0,fullWidth:!0,label:"Customer Name",name:"customerName",value:a.customerName,onChange:u})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Phone Number",name:"customerPhone",value:a.customerPhone,onChange:u})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Email",name:"customerEmail",type:"email",value:a.customerEmail,onChange:u})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Pickup Date",name:"pickupDate",type:"datetime-local",value:a.pickupDate,onChange:u,InputLabelProps:{shrink:!0},required:!0})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.A,{fullWidth:!0,required:!0,children:[(0,i.jsx)(A.A,{children:"Order Status"}),(0,i.jsxs)(p.A,{name:"status",value:a.status,onChange:e=>{let{name:t,value:n}=e.target;o({...a,[t]:n})},label:"Order Status",children:[(0,i.jsx)(j.A,{value:"Pending",children:"Pending"}),(0,i.jsx)(j.A,{value:"Confirmed",children:"Confirmed"}),(0,i.jsx)(j.A,{value:"Completed",children:"Completed"}),(0,i.jsx)(j.A,{value:"Cancelled",children:"Cancelled"})]})]})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,children:(0,i.jsx)(H.A,{fullWidth:!0,multiline:!0,rows:2,label:"Order Notes",name:"notes",value:a.notes,onChange:u})}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,children:[(0,i.jsx)(G.A,{sx:{my:2}}),(0,i.jsx)(h.A,{variant:"h6",sx:{mb:2},children:"Order Items"}),(0,i.jsxs)(q.Ay,{container:!0,spacing:2,sx:{mb:2},children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,md:5,children:(0,i.jsxs)(m.A,{fullWidth:!0,children:[(0,i.jsx)(A.A,{children:"Product"}),(0,i.jsx)(p.A,{value:d.productId.toString(),onChange:e=>{let n=e.target.value,i=t.find(e=>e.id.toString()===n.toString());i&&x({...d,productId:n,productName:i.name,unitPrice:i.price})},label:"Product",children:t.map(e=>(0,i.jsxs)(j.A,{value:e.id.toString(),children:[e.name," - $",e.price.toFixed(2)]},e.id))})]})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:3,children:(0,i.jsx)(H.A,{fullWidth:!0,type:"number",label:"Quantity",name:"quantity",value:d.quantity,onChange:e=>{let{name:t,value:n}=e.target,i=parseInt(n,10);isNaN(i)||x({...d,[t]:i})},inputProps:{min:1}})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(g.A,{variant:"contained",startIcon:(0,i.jsx)(U.A,{}),onClick:()=>{d.productId&&(o({...a,items:[...a.items,{...d}]}),x({productId:"",productName:"",quantity:1,unitPrice:0}))},disabled:!d.productId,fullWidth:!0,sx:{height:"100%"},children:"Add Item"})})]}),(0,i.jsx)(y.A,{variant:"outlined",sx:{maxHeight:"300px",overflow:"auto"},children:(0,i.jsx)(O.A,{children:a.items.length>0?a.items.map((e,t)=>(0,i.jsx)(R.Ay,{secondaryAction:(0,i.jsx)(L.A,{edge:"end",onClick:()=>b(t),children:(0,i.jsx)(K.A,{color:"error"})}),divider:t<a.items.length-1,children:(0,i.jsx)(T.A,{primary:e.productName,secondary:"".concat(e.quantity," \xd7 $").concat(e.unitPrice.toFixed(2)," = $").concat((e.quantity*e.unitPrice).toFixed(2))})},t)):(0,i.jsx)(R.Ay,{children:(0,i.jsx)(T.A,{primary:"No items added to this order yet."})})})}),(0,i.jsx)(c.A,{sx:{mt:2,textAlign:"right"},children:(0,i.jsxs)(h.A,{variant:"h6",children:["Total: $",a.totalPrice.toFixed(2)]})})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,children:[(0,i.jsx)(G.A,{sx:{my:2}}),(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,i.jsx)(M.A,{onClick:r,type:"button",color:"secondary",children:"Cancel"}),(0,i.jsx)(M.A,{type:"submit",children:"Save Order"})]})]})]})})]})};var _=n(32574),Y=n(38619),Z=n(97165),J=n(31455);let Q=e=>{let{products:t,selectedDate:n,onSave:l,onCancel:r}=e,a=(0,Y.g)((0,Z.a)(n,12),0),[o,d]=(0,s.useState)({customerName:"",customerPhone:"",pickupDate:(0,J.GP)(a,"yyyy-MM-dd'T'HH:mm"),status:"Confirmed",notes:"",items:[],totalPrice:0}),[x,u]=(0,s.useState)(null),[b,f]=(0,s.useState)(1);(0,s.useEffect)(()=>{let e=o.items.reduce((e,t)=>e+t.quantity*t.unitPrice,0);d(t=>({...t,totalPrice:parseFloat(e.toFixed(2))}))},[o.items]);let v=e=>{let{name:t,value:n}=e.target;d({...o,[t]:n})},k=e=>{let t=[...o.items];t.splice(e,1),d({...o,items:t})},C=[];for(let e=6;e<=18;e++)C.push("".concat(e,":00")),C.push("".concat(e,":30"));return(0,i.jsxs)(y.A,{sx:{p:3,borderRadius:2},elevation:2,children:[(0,i.jsxs)(h.A,{variant:"h6",gutterBottom:!0,children:["Neue Bestellung f\xfcr ",(0,J.GP)(n,"dd.MM.yyyy")]}),(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),l(o)},children:(0,i.jsxs)(q.Ay,{container:!0,spacing:2,children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(H.A,{required:!0,fullWidth:!0,label:"Kundenname",name:"customerName",value:o.customerName,onChange:v,autoFocus:!0,variant:"outlined",size:"small",margin:"dense"})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Telefonnummer",name:"customerPhone",value:o.customerPhone,onChange:v,variant:"outlined",size:"small",margin:"dense"})}),(0,i.jsx)(q.Ay,{item:!0,xs:6,md:3,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Abholdatum",type:"date",name:"pickupDate",value:o.pickupDate.split("T")[0],onChange:v,InputLabelProps:{shrink:!0},variant:"outlined",size:"small",margin:"dense"})}),(0,i.jsx)(q.Ay,{item:!0,xs:6,md:3,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Uhrzeit",name:"pickupTime",select:!0,value:o.pickupDate.split("T")[1].substring(0,5),onChange:e=>{let[t,n]=e.target.value.split(":"),i=new Date(o.pickupDate);i.setHours(parseInt(t,10)),i.setMinutes(parseInt(n,10)),d({...o,pickupDate:(0,J.GP)(i,"yyyy-MM-dd'T'HH:mm")})},variant:"outlined",size:"small",margin:"dense",children:C.map(e=>(0,i.jsx)(j.A,{value:e,children:e},e))})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:6,children:(0,i.jsxs)(m.A,{fullWidth:!0,variant:"outlined",size:"small",margin:"dense",children:[(0,i.jsx)(A.A,{children:"Status"}),(0,i.jsxs)(p.A,{name:"status",value:o.status,onChange:e=>{d({...o,status:e.target.value})},label:"Status",children:[(0,i.jsx)(j.A,{value:"Pending",children:"Ausstehend"}),(0,i.jsx)(j.A,{value:"Confirmed",children:"Best\xe4tigt"}),(0,i.jsx)(j.A,{value:"Completed",children:"Abgeschlossen"}),(0,i.jsx)(j.A,{value:"Cancelled",children:"Storniert"})]})]})}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,children:[(0,i.jsx)(G.A,{sx:{my:1}}),(0,i.jsx)(h.A,{variant:"subtitle1",sx:{mb:1},children:"Artikel hinzuf\xfcgen"}),(0,i.jsxs)(q.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,sm:6,children:(0,i.jsx)(_.A,{options:t,getOptionLabel:e=>"".concat(e.name," (").concat(e.price.toFixed(2)," €)"),value:x,onChange:(e,t)=>u(t),renderInput:e=>(0,i.jsx)(H.A,{...e,label:"Produkt",variant:"outlined",size:"small",margin:"dense"})})}),(0,i.jsx)(q.Ay,{item:!0,xs:4,sm:2,children:(0,i.jsx)(H.A,{fullWidth:!0,label:"Menge",type:"number",value:b,onChange:e=>f(parseInt(e.target.value)||1),inputProps:{min:1},variant:"outlined",size:"small",margin:"dense"})}),(0,i.jsx)(q.Ay,{item:!0,xs:8,sm:4,children:(0,i.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>{if(!x)return;let e={productId:x.id,productName:x.name,quantity:b,unitPrice:x.price};d({...o,items:[...o.items,e]}),u(null),f(1)},disabled:!x,startIcon:(0,i.jsx)(U.A,{}),fullWidth:!0,size:"medium",children:"Hinzuf\xfcgen"})})]})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,children:[(0,i.jsx)(y.A,{variant:"outlined",sx:{p:2,mt:1,bgcolor:"background.default",maxHeight:"200px",overflowY:"auto"},children:0===o.items.length?(0,i.jsx)(h.A,{color:"text.secondary",children:"Keine Artikel hinzugef\xfcgt"}):(0,i.jsx)(c.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:o.items.map((e,t)=>(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,borderRadius:1,bgcolor:"background.paper",border:"1px solid",borderColor:"divider"},children:[(0,i.jsxs)(c.A,{children:[(0,i.jsx)(h.A,{variant:"body2",children:e.productName}),(0,i.jsxs)(h.A,{variant:"caption",color:"text.secondary",children:[e.quantity," \xd7 ",e.unitPrice.toFixed(2)," € ="," ",(e.quantity*e.unitPrice).toFixed(2)," €"]})]}),(0,i.jsx)(L.A,{size:"small",color:"error",onClick:()=>k(t),children:(0,i.jsx)(K.A,{fontSize:"small"})})]},t))})}),(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,i.jsx)(H.A,{label:"Notizen",name:"notes",value:o.notes,onChange:v,variant:"outlined",size:"small",sx:{width:"70%"}}),(0,i.jsxs)(h.A,{variant:"h6",sx:{pt:1},children:["Gesamt: ",o.totalPrice.toFixed(2)," €"]})]})]}),(0,i.jsx)(q.Ay,{item:!0,xs:12,children:(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:1},children:[(0,i.jsx)(g.A,{variant:"outlined",color:"inherit",onClick:r,children:"Abbrechen"}),(0,i.jsx)(g.A,{variant:"contained",color:"primary",type:"submit",disabled:0===o.items.length||!o.customerName,children:"Bestellung speichern"})]})})]})})]})};var V=n(26096),ee=n(84423),et=n(72794),en=n(40714),ei=n(54549),es=n(85118),el=n(3898),er=n(98794),ea=n(62713),eo=n(46374),ed=n(26968),ec=n(84256),ex=n(83339),eh=n(15876),eu=n(25949),em=n(72137),eA=n(3967),ep=n(33470),ej=n(57236),eg=n(70556),ey=n(20772),eb=n(14459),ef=n(53267),ev=n(27009),ek=n(49428),eC=n(52832),eP=n(81657),eS=n(66486);let ew=e=>{var t;let{order:n,open:s,onClose:r,onEdit:a,onDelete:o}=e,x=(0,l.A)();if(!n)return null;let u=(e,t)=>{try{if("string"==typeof e)return(0,J.GP)((0,er.H)(e),t,{locale:ea.de});return(0,J.GP)(e,t,{locale:ea.de})}catch(e){return console.error("Date formatting error:",e),"Ung\xfcltiges Datum"}},m=u(n.pickupDate,"EEEE, dd. MMMM yyyy"),A=u(n.pickupDate,"HH:mm"),p=n.createdAt?u(n.createdAt,"dd.MM.yyyy HH:mm"):"-",j=e=>{switch(e){case"Pending":return"warning";case"Confirmed":return"primary";case"Completed":return"success";case"Cancelled":return"error";default:return"default"}},f=e=>{switch(e){case"Pending":return"Ausstehend";case"Confirmed":return"Best\xe4tigt";case"Completed":return"Abgeschlossen";case"Cancelled":return"Storniert";default:return e}},v=n.items?n.items.reduce((e,t)=>e+t.quantity,0):0;return n.totalPrice,null==(t=n.items)||t.reduce((e,t)=>e+t.quantity*t.unitPrice,0),(0,i.jsxs)(k.A,{open:s,onClose:r,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,boxShadow:x.shadows[10],maxHeight:"90vh"}},children:[(0,i.jsxs)(C.A,{sx:{pr:6,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid ".concat(x.palette.divider),bgcolor:(0,b.X4)(x.palette.primary.main,.03)},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,i.jsx)(c.A,{sx:{bgcolor:(0,b.X4)(x.palette.primary.main,.1),color:x.palette.primary.main,borderRadius:"50%",width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(eS.A,{})}),(0,i.jsxs)(c.A,{children:[(0,i.jsxs)(h.A,{variant:"h6",component:"div",fontWeight:600,children:["Bestellung #",n.id]}),(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[(0,i.jsx)(d.A,{label:f(n.status),color:j(n.status),size:"small"}),(0,i.jsxs)(h.A,{variant:"caption",color:"text.secondary",children:["Erstellt am ",p]})]})]})]}),(0,i.jsx)(L.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8,bgcolor:(0,b.X4)(x.palette.grey[500],.1),"&:hover":{bgcolor:(0,b.X4)(x.palette.grey[500],.2)}},children:(0,i.jsx)(ey.A,{})})]}),(0,i.jsx)(P.A,{sx:{p:3},children:(0,i.jsxs)(q.Ay,{container:!0,spacing:3,children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,md:8,children:(0,i.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,i.jsxs)(q.Ay,{container:!0,spacing:2,children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,sm:6,children:(0,i.jsx)(ec.A,{variant:"outlined",sx:{height:"100%"},children:(0,i.jsxs)(ex.A,{children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,i.jsx)(ev.A,{color:"primary",sx:{mr:1}}),(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:600,children:"Kundeninformationen"})]}),(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,sx:{mb:1},children:n.customerName}),n.customerPhone&&(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:.5},children:[(0,i.jsx)(eC.A,{fontSize:"small",color:"action",sx:{mr:1}}),(0,i.jsx)(h.A,{variant:"body2",children:n.customerPhone})]}),n.customerEmail&&(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(ek.A,{fontSize:"small",color:"action",sx:{mr:1}}),(0,i.jsx)(h.A,{variant:"body2",children:n.customerEmail})]})]})})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,sm:6,children:(0,i.jsx)(ec.A,{variant:"outlined",sx:{height:"100%",borderColor:x.palette.primary.main,bgcolor:(0,b.X4)(x.palette.primary.main,.03)},children:(0,i.jsxs)(ex.A,{children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,i.jsx)(ef.A,{color:"primary",sx:{mr:1}}),(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:600,children:"Abholungsinformationen"})]}),(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,sx:{mb:1},children:m}),(0,i.jsx)(c.A,{sx:{display:"flex",alignItems:"center"},children:(0,i.jsx)(d.A,{label:"".concat(A," Uhr"),size:"small",color:"primary",variant:"outlined"})})]})})})]}),n.notes&&(0,i.jsx)(ec.A,{variant:"outlined",children:(0,i.jsxs)(ex.A,{children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,i.jsx)(eP.A,{color:"primary",sx:{mr:1}}),(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:600,children:"Notizen zur Bestellung"})]}),(0,i.jsx)(y.A,{variant:"outlined",sx:{p:2,bgcolor:(0,b.X4)(x.palette.background.default,.7),borderRadius:1},children:(0,i.jsx)(h.A,{variant:"body2",children:n.notes})})]})}),(0,i.jsx)(ec.A,{variant:"outlined",children:(0,i.jsxs)(ex.A,{children:[(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(eS.A,{color:"primary",sx:{mr:1}}),(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:600,children:"Bestellte Artikel"})]}),(0,i.jsx)(d.A,{label:"".concat(v," ").concat("Artikel"),size:"small",color:"primary"})]}),(0,i.jsx)(eh.A,{component:y.A,variant:"outlined",children:(0,i.jsxs)(eu.A,{size:"small",children:[(0,i.jsx)(em.A,{children:(0,i.jsxs)(eA.A,{sx:{bgcolor:(0,b.X4)(x.palette.primary.main,.05)},children:[(0,i.jsx)(ep.A,{sx:{fontWeight:600},children:"Produkt"}),(0,i.jsx)(ep.A,{align:"center",sx:{fontWeight:600},children:"Anzahl"}),(0,i.jsx)(ep.A,{align:"right",sx:{fontWeight:600},children:"Einzelpreis"}),(0,i.jsx)(ep.A,{align:"right",sx:{fontWeight:600},children:"Gesamt"})]})}),(0,i.jsxs)(ej.A,{children:[n.items&&n.items.map((e,t)=>(0,i.jsxs)(eA.A,{hover:!0,children:[(0,i.jsx)(ep.A,{component:"th",scope:"row",children:(0,i.jsx)(h.A,{variant:"body2",fontWeight:500,children:e.productName})}),(0,i.jsx)(ep.A,{align:"center",children:(0,i.jsx)(d.A,{label:e.quantity,size:"small",variant:"outlined",sx:{minWidth:"40px"}})}),(0,i.jsxs)(ep.A,{align:"right",children:[e.unitPrice.toFixed(2)," €"]}),(0,i.jsxs)(ep.A,{align:"right",sx:{fontWeight:500},children:[(e.quantity*e.unitPrice).toFixed(2)," €"]})]},t)),(0,i.jsxs)(eA.A,{sx:{bgcolor:(0,b.X4)(x.palette.primary.main,.05)},children:[(0,i.jsx)(ep.A,{colSpan:2}),(0,i.jsx)(ep.A,{align:"right",sx:{fontWeight:600},children:"Gesamtsumme"}),(0,i.jsxs)(ep.A,{align:"right",sx:{fontWeight:600,color:x.palette.primary.main},children:[n.totalPrice.toFixed(2)," €"]})]})]})]})})]})})]})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(ec.A,{variant:"outlined",sx:{bgcolor:(0,b.X4)(x.palette.primary.main,.03),height:"100%"},children:(0,i.jsxs)(ex.A,{children:[(0,i.jsx)(h.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Bestell\xfcbersicht"}),(0,i.jsx)(G.A,{sx:{mb:2}}),(0,i.jsxs)(q.Ay,{container:!0,spacing:2,children:[(0,i.jsxs)(q.Ay,{item:!0,xs:6,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Bestellnummer"}),(0,i.jsxs)(h.A,{variant:"body1",fontWeight:500,children:["#",n.id]})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:6,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Status"}),(0,i.jsx)(d.A,{label:f(n.status),color:j(n.status),size:"small"})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:6,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Anzahl Artikel"}),(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,children:v})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:6,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Abholungsdatum"}),(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,children:u(n.pickupDate,"dd.MM.yyyy")})]})]}),(0,i.jsx)(c.A,{sx:{mt:3,mb:2},children:(0,i.jsx)(G.A,{})}),(0,i.jsxs)(c.A,{sx:{bgcolor:x.palette.background.paper,p:2,borderRadius:1,border:"1px solid ".concat(x.palette.divider)},children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Gesamtbetrag"}),(0,i.jsxs)(h.A,{variant:"h5",fontWeight:600,color:"primary.main",children:[n.totalPrice.toFixed(2)," €"]})]})]})})})]})}),(0,i.jsxs)(w.A,{sx:{p:2,justifyContent:"space-between",borderTop:"1px solid ".concat(x.palette.divider)},children:[(0,i.jsx)(V.A,{title:"Bestellung unwiderruflich l\xf6schen",children:(0,i.jsx)(g.A,{startIcon:(0,i.jsx)(K.A,{}),variant:"outlined",color:"error",onClick:()=>{confirm("M\xf6chten Sie diese Bestellung wirklich l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.")&&(o(n.id),r())},children:"L\xf6schen"})}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(g.A,{startIcon:(0,i.jsx)(eb.A,{}),variant:"outlined",sx:{mr:1},onClick:()=>{console.log("Print order:",n.id),alert("Druckfunktion wird implementiert...")},children:"Drucken"}),(0,i.jsx)(g.A,{startIcon:(0,i.jsx)(eg.A,{}),variant:"contained",onClick:()=>{a(n),r()},children:"Bearbeiten"})]})]})]})},eW=e=>{let{orders:t,onDateSelect:n,onOrderClick:r,onAddOrder:a,onDeleteOrder:o}=e,d=(0,l.A)(),[x,m]=(0,s.useState)(new Date),[A,p]=(0,s.useState)(null),[j,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),k=(0,s.useMemo)(()=>{let e=(0,ee.k)(x,{weekStartsOn:1}),t=(0,et.$)(x,{weekStartsOn:1}),n=[],i=e;for(;i<=t;)n.push(i),i=(0,en.f)(i,1);return n},[x]),C=e=>{p(e),n(e)},P=(0,s.useMemo)(()=>{let e={};return t.forEach(t=>{if(t.pickupDate){let n=(0,J.GP)(new Date(t.pickupDate),"yyyy-MM-dd");e[n]||(e[n]=[]),e[n].push(t)}}),e},[t]),S=e=>(0,el.r)(e,new Date);return(0,i.jsxs)(c.A,{sx:{width:"100%",mb:4},children:[(0,i.jsxs)(y.A,{elevation:2,sx:{p:2,borderRadius:2,overflow:"hidden"},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,i.jsxs)(h.A,{variant:"h6",fontWeight:600,children:["Wochen\xfcbersicht: ",(0,J.GP)(k[0],"dd.MM.",{locale:ea.de})," -"," ",(0,J.GP)(k[6],"dd.MM.yyyy",{locale:ea.de})]}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(L.A,{onClick:()=>{m((0,ei.k)(x,1))},children:(0,i.jsx)(ed.A,{})}),(0,i.jsx)(L.A,{onClick:()=>{m((0,es.J)(x,1))},children:(0,i.jsx)(eo.A,{})})]})]}),(0,i.jsx)(G.A,{}),(0,i.jsx)(q.Ay,{container:!0,spacing:1,sx:{pt:1},children:k.map(e=>{let t=(0,J.GP)(e,"yyyy-MM-dd"),n=P[t]||[],s=A&&(0,el.r)(e,A),l=S(e),r=(0,J.GP)(e,"EEEEEE",{locale:ea.de}),o=(0,J.GP)(e,"d");return(0,i.jsx)(q.Ay,{item:!0,xs:12,sm:6,md:3,lg:12/7,children:(0,i.jsxs)(y.A,{sx:{p:1.5,height:"100%",cursor:"pointer",borderRadius:2,bgcolor:s?(0,b.X4)(d.palette.primary.main,.1):l?(0,b.X4)(d.palette.primary.main,.05):"background.paper",border:s?"1px solid ".concat(d.palette.primary.main):l?"1px solid ".concat((0,b.X4)(d.palette.primary.main,.3)):"1px solid transparent","&:hover":{bgcolor:(0,b.X4)(d.palette.primary.main,.08)},position:"relative"},elevation:0,onClick:()=>C(e),children:[(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,i.jsxs)(c.A,{children:[(0,i.jsx)(h.A,{variant:"caption",display:"block",color:"text.secondary",fontWeight:500,children:r.toUpperCase()}),(0,i.jsx)(h.A,{variant:"h6",fontWeight:l?700:500,color:l?"primary.main":"text.primary",children:o})]}),(0,i.jsx)(L.A,{size:"small",onClick:t=>{t.stopPropagation(),a(e)},sx:{bgcolor:d.palette.primary.main,color:d.palette.primary.contrastText,"&:hover":{bgcolor:d.palette.primary.dark},width:24,height:24},children:(0,i.jsx)(I.A,{sx:{fontSize:16}})})]}),(0,i.jsx)(c.A,{sx:{maxHeight:160,overflowY:"auto",pr:.5},children:n.length>0?n.map(e=>{var t,n;return(0,i.jsx)(V.A,{title:"".concat(e.customerName,": ").concat((null==(t=e.items)?void 0:t.length)||0," Artikel"),children:(0,i.jsxs)(y.A,{elevation:0,onClick:t=>{t.stopPropagation(),g(e),v(!0)},sx:{p:1,mb:1,borderRadius:1,cursor:"pointer",bgcolor:"Completed"===e.status?(0,b.X4)(d.palette.success.main,.1):"Confirmed"===e.status?(0,b.X4)(d.palette.info.main,.1):"Cancelled"===e.status?(0,b.X4)(d.palette.error.main,.1):(0,b.X4)(d.palette.warning.main,.1),border:"1px solid ".concat("Completed"===e.status?(0,b.X4)(d.palette.success.main,.2):"Confirmed"===e.status?(0,b.X4)(d.palette.info.main,.2):"Cancelled"===e.status?(0,b.X4)(d.palette.error.main,.2):(0,b.X4)(d.palette.warning.main,.2)),"&:hover":{bgcolor:"Completed"===e.status?(0,b.X4)(d.palette.success.main,.2):"Confirmed"===e.status?(0,b.X4)(d.palette.info.main,.2):"Cancelled"===e.status?(0,b.X4)(d.palette.error.main,.2):(0,b.X4)(d.palette.warning.main,.2)}},children:[(0,i.jsx)(h.A,{variant:"body2",noWrap:!0,children:e.customerName}),(0,i.jsxs)(h.A,{variant:"caption",color:"text.secondary",display:"block",noWrap:!0,children:[(0,J.GP)((0,er.H)(e.pickupDate.toString()),"HH:mm")," ","- ",(null==(n=e.items)?void 0:n.length)||0," Artikel"]})]})},e.id)}):(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",sx:{py:1},children:"Keine Bestellungen"})}),n.length>0&&(0,i.jsx)(u.A,{badgeContent:n.length,color:"primary",sx:{position:"absolute",top:8,right:8}})]})},t)})})]}),(0,i.jsx)(ew,{order:j,open:f,onClose:()=>v(!1),onEdit:r,onDelete:e=>{v(!1),o&&j&&o(e)}})]})};var eI=n(57657),ez=n(85426),eD=n(11964);let eB=e=>{let{order:t,products:n,onSave:r,onDelete:a,onCancel:o}=e,[x,u]=(0,s.useState)({}),f=(0,l.A)(),[v,W]=(0,s.useState)(!1),[I,z]=(0,s.useState)({...t}),[D,B]=(0,s.useState)(null),[E,N]=(0,s.useState)(1),[M,X]=(0,s.useState)(!1);(0,s.useEffect)(()=>{z({...t})},[t]);let F=I.items.reduce((e,t)=>e+t.quantity,0),O=e=>{let{name:t,value:n}=e.target;z({...I,[t]:n})},R=e=>{let t=[...I.items];t.splice(e,1);let n=t.reduce((e,t)=>e+t.quantity*t.unitPrice,0);z({...I,items:t,totalPrice:n})},T=(e,t)=>{if(t<1)return;let n=[...I.items];n[e].quantity=t;let i=n.reduce((e,t)=>e+t.quantity*t.unitPrice,0);z({...I,items:n,totalPrice:i})},$=[];for(let e=6;e<=18;e++)$.push("".concat(e,":00")),$.push("".concat(e,":30"));return(0,i.jsxs)(c.A,{sx:{mb:4},children:[v&&(0,i.jsx)(y.A,{elevation:0,sx:{p:2,mb:3,bgcolor:(0,b.X4)(f.palette.primary.main,.08),borderLeft:"4px solid ".concat(f.palette.primary.main),borderRadius:1},children:(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:500,children:"Sie bearbeiten diese Bestellung. Bitte klicken Sie auf Speichern, um Ihre \xc4nderungen zu \xfcbernehmen."})}),(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,i.jsxs)(h.A,{variant:"h5",fontWeight:600,children:["Bestellung #",I.id]}),(0,i.jsx)(c.A,{children:v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.A,{variant:"outlined",color:"inherit",startIcon:(0,i.jsx)(ez.A,{}),onClick:()=>{W(!1),z({...t})},sx:{mr:1},children:"Abbrechen"}),(0,i.jsx)(g.A,{variant:"contained",color:"primary",startIcon:(0,i.jsx)(eI.A,{}),onClick:()=>{let e={};if(I.customerName||(e.customerName="Kundenname ist erforderlich"),I.pickupDate||(e.pickupDate="Abholdatum ist erforderlich"),Object.keys(e).length>0)return void u(e);r(I),W(!1),u({})},children:"Speichern"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.A,{variant:"outlined",color:"error",startIcon:(0,i.jsx)(K.A,{}),onClick:()=>X(!0),sx:{mr:1},children:"L\xf6schen"}),(0,i.jsx)(g.A,{variant:"outlined",color:"inherit",startIcon:(0,i.jsx)(eb.A,{}),sx:{mr:1},onClick:()=>{console.log("Print order:",t.id)},children:"Drucken"}),(0,i.jsx)(g.A,{variant:"contained",color:"primary",startIcon:(0,i.jsx)(eg.A,{}),onClick:()=>W(!0),children:"Bearbeiten"})]})})]}),(0,i.jsxs)(q.Ay,{container:!0,spacing:3,children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,md:8,children:(0,i.jsxs)(y.A,{elevation:"dark"===f.palette.mode?2:1,sx:{p:3,borderRadius:2,height:"100%"},children:[(0,i.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Bestelldetails"}),(0,i.jsx)(G.A,{sx:{mb:2}}),(0,i.jsxs)(q.Ay,{container:!0,spacing:2,children:[(0,i.jsxs)(q.Ay,{item:!0,xs:12,sm:6,children:[(0,i.jsx)(h.A,{variant:"subtitle2",color:"text.secondary",children:"Kunde"}),v?(0,i.jsx)(H.A,{name:"customerName",value:I.customerName,onChange:O,fullWidth:!0,margin:"dense",size:"small",label:"Name",required:!0,error:!!x.customerName,helperText:x.customerName}):(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,children:I.customerName}),v?(0,i.jsx)(H.A,{name:"customerPhone",value:I.customerPhone||"",onChange:O,fullWidth:!0,margin:"dense",size:"small",label:"Telefon"}):I.customerPhone&&(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:I.customerPhone}),v?(0,i.jsx)(H.A,{name:"customerEmail",value:I.customerEmail||"",onChange:O,fullWidth:!0,margin:"dense",size:"small",label:"Email"}):I.customerEmail&&(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:I.customerEmail})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,sm:6,children:[(0,i.jsx)(h.A,{variant:"subtitle2",color:"text.secondary",children:"Abholung"}),v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{type:"date",name:"pickupDate",value:"string"==typeof I.pickupDate?I.pickupDate.split("T")[0]:(0,J.GP)(I.pickupDate,"yyyy-MM-dd"),onChange:O,fullWidth:!0,margin:"dense",size:"small",InputLabelProps:{shrink:!0},label:"Datum",required:!0,error:!!x.pickupDate,helperText:x.pickupDate}),(0,i.jsxs)(m.A,{fullWidth:!0,margin:"dense",size:"small",children:[(0,i.jsx)(A.A,{children:"Uhrzeit"}),(0,i.jsx)(p.A,{value:"string"==typeof I.pickupDate?I.pickupDate.split("T")[1].substring(0,5):(0,J.GP)(I.pickupDate,"HH:mm"),onChange:e=>{let[t,n]=e.target.value.split(":"),i=new Date(I.pickupDate);i.setHours(parseInt(t,10)),i.setMinutes(parseInt(n,10)),z({...I,pickupDate:(0,J.GP)(i,"yyyy-MM-dd'T'HH:mm")})},label:"Uhrzeit",children:$.map(e=>(0,i.jsx)(j.A,{value:e,children:e},e))})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,children:(e=>"string"==typeof e?(0,J.GP)((0,er.H)(e),"EEEE, dd. MMMM yyyy",{locale:ea.de}):(0,J.GP)(e,"EEEE, dd. MMMM yyyy",{locale:ea.de}))(I.pickupDate)}),(0,i.jsxs)(h.A,{variant:"body2",color:"text.secondary",children:[(e=>"string"==typeof e?(0,J.GP)((0,er.H)(e),"HH:mm",{locale:ea.de}):(0,J.GP)(e,"HH:mm",{locale:ea.de}))(I.pickupDate)," Uhr"]})]}),(0,i.jsxs)(c.A,{sx:{mt:2},children:[(0,i.jsx)(h.A,{variant:"subtitle2",color:"text.secondary",children:"Status"}),v?(0,i.jsx)(m.A,{fullWidth:!0,margin:"dense",size:"small",children:(0,i.jsxs)(p.A,{value:I.status,onChange:e=>{z({...I,status:e.target.value})},children:[(0,i.jsx)(j.A,{value:"Pending",children:"Ausstehend"}),(0,i.jsx)(j.A,{value:"Confirmed",children:"Best\xe4tigt"}),(0,i.jsx)(j.A,{value:"Completed",children:"Abgeschlossen"}),(0,i.jsx)(j.A,{value:"Cancelled",children:"Storniert"})]})}):(0,i.jsx)(d.A,{label:(e=>{switch(e){case"Pending":return"Ausstehend";case"Confirmed":return"Best\xe4tigt";case"Completed":return"Abgeschlossen";case"Cancelled":return"Storniert";default:return e}})(I.status),color:(e=>{switch(e){case"Pending":return"warning";case"Confirmed":return"primary";case"Completed":return"success";case"Cancelled":return"error";default:return"default"}})(I.status),size:"small"})]})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,children:[(0,i.jsx)(h.A,{variant:"subtitle2",color:"text.secondary",children:"Notizen"}),v?(0,i.jsx)(H.A,{name:"notes",value:I.notes||"",onChange:O,fullWidth:!0,multiline:!0,rows:2,margin:"dense"}):(0,i.jsx)(y.A,{variant:"outlined",sx:{p:2,bgcolor:"background.default",mt:1},children:(0,i.jsx)(h.A,{variant:"body2",children:I.notes||"Keine Notizen"})})]})]})]})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,md:4,children:(0,i.jsxs)(y.A,{elevation:"dark"===f.palette.mode?2:1,sx:{p:3,borderRadius:2,bgcolor:"dark"===f.palette.mode?f.palette.background.paper:(0,b.X4)(f.palette.primary.main,.03)},children:[(0,i.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Zusammenfassung"}),(0,i.jsx)(G.A,{sx:{mb:2}}),(0,i.jsx)(c.A,{sx:{mb:2},children:(0,i.jsxs)(q.Ay,{container:!0,spacing:1,children:[(0,i.jsxs)(q.Ay,{item:!0,xs:6,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Bestellnummer"}),(0,i.jsxs)(h.A,{variant:"body1",fontWeight:500,children:["#",I.id]})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:6,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Artikel"}),(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,children:F})]}),(0,i.jsxs)(q.Ay,{item:!0,xs:12,children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Gesamtbetrag"}),(0,i.jsxs)(h.A,{variant:"h5",fontWeight:600,color:"primary.main",children:[I.totalPrice.toFixed(2)," €"]})]})]})})]})}),(0,i.jsx)(q.Ay,{item:!0,xs:12,children:(0,i.jsxs)(y.A,{elevation:"dark"===f.palette.mode?2:1,sx:{p:3,borderRadius:2},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,i.jsx)(h.A,{variant:"h6",children:"Bestellte Artikel"}),v&&(0,i.jsxs)(h.A,{variant:"body2",color:"primary",children:[I.items.length," Artikel"]})]}),(0,i.jsx)(G.A,{sx:{mb:3}}),v&&(0,i.jsxs)(y.A,{variant:"outlined",sx:{p:3,mb:3,bgcolor:"dark"===f.palette.mode?(0,b.X4)(f.palette.primary.main,.1):(0,b.X4)(f.palette.primary.main,.03)},children:[(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:500,sx:{mb:2},children:"Produkt zur Bestellung hinzuf\xfcgen"}),(0,i.jsxs)(q.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,i.jsx)(q.Ay,{item:!0,xs:12,sm:6,children:(0,i.jsx)(_.A,{options:n,getOptionLabel:e=>"".concat(e.name," (").concat(e.price.toFixed(2)," €)"),value:D,onChange:(e,t)=>B(t),renderInput:e=>(0,i.jsx)(H.A,{...e,label:"Produkt ausw\xe4hlen",variant:"outlined",size:"small"}),renderOption:(e,t)=>(0,i.jsx)("li",{...e,children:(0,i.jsxs)(c.A,{children:[(0,i.jsx)(h.A,{variant:"body1",children:t.name}),(0,i.jsxs)(h.A,{variant:"body2",color:"text.secondary",children:[t.price.toFixed(2)," € pro St\xfcck"]})]})})})}),(0,i.jsx)(q.Ay,{item:!0,xs:4,sm:2,children:(0,i.jsx)(H.A,{label:"Menge",type:"number",value:E,onChange:e=>N(Math.max(1,parseInt(e.target.value)||1)),InputProps:{inputProps:{min:1},startAdornment:(0,i.jsx)(c.A,{sx:{mr:1},children:"\xd7"})},fullWidth:!0,size:"small"})}),(0,i.jsx)(q.Ay,{item:!0,xs:8,sm:4,children:(0,i.jsx)(g.A,{variant:"contained",color:"primary",startIcon:(0,i.jsx)(U.A,{}),onClick:()=>{let e;if(!D)return;let t=I.items.findIndex(e=>e.productId===D.id);if(-1!==t)e=[...I.items],e[t].quantity+=E;else{let t={productId:D.id,productName:D.name,quantity:E,unitPrice:D.price};e=[...I.items,t]}let n=e.reduce((e,t)=>e+t.quantity*t.unitPrice,0);z({...I,items:e,totalPrice:n}),B(null),N(1)},disabled:!D,fullWidth:!0,children:"Hinzuf\xfcgen"})})]})]}),(0,i.jsx)(eh.A,{component:y.A,variant:"outlined",children:(0,i.jsxs)(eu.A,{size:v?"medium":"small",children:[(0,i.jsx)(em.A,{children:(0,i.jsxs)(eA.A,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(ep.A,{width:"40%",children:"Produkt"}),(0,i.jsx)(ep.A,{align:"center",children:"Anzahl"}),(0,i.jsx)(ep.A,{align:"right",children:"Einzelpreis"}),(0,i.jsx)(ep.A,{align:"right",children:"Gesamt"}),v&&(0,i.jsx)(ep.A,{align:"center",children:"Aktionen"})]})}),(0,i.jsxs)(ej.A,{children:[I.items.length>0?I.items.map((e,t)=>(0,i.jsxs)(eA.A,{sx:{bgcolor:v?(0,b.X4)(f.palette.primary.main,.03):"inherit","&:hover":{bgcolor:v?(0,b.X4)(f.palette.primary.main,.05):"inherit"}},children:[(0,i.jsx)(ep.A,{children:(0,i.jsx)(h.A,{variant:"body1",children:e.productName})}),(0,i.jsx)(ep.A,{align:"center",children:v?(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(L.A,{size:"small",color:"primary",onClick:()=>T(t,e.quantity-1),disabled:e.quantity<=1,sx:{border:"1px solid ".concat((0,b.X4)(f.palette.primary.main,.5))},children:(0,i.jsx)(eD.A,{fontSize:"small"})}),(0,i.jsx)(h.A,{sx:{mx:1,minWidth:"30px",textAlign:"center",fontWeight:600},children:e.quantity}),(0,i.jsx)(L.A,{size:"small",color:"primary",onClick:()=>T(t,e.quantity+1),sx:{border:"1px solid ".concat((0,b.X4)(f.palette.primary.main,.5))},children:(0,i.jsx)(U.A,{fontSize:"small"})})]}):(0,i.jsx)(h.A,{variant:"body1",fontWeight:500,children:e.quantity})}),(0,i.jsxs)(ep.A,{align:"right",children:[e.unitPrice.toFixed(2)," €"]}),(0,i.jsxs)(ep.A,{align:"right",children:[(e.quantity*e.unitPrice).toFixed(2)," €"]}),v&&(0,i.jsx)(ep.A,{align:"center",children:(0,i.jsx)(g.A,{variant:"outlined",color:"error",size:"small",onClick:()=>R(t),startIcon:(0,i.jsx)(K.A,{}),sx:{minWidth:"120px"},children:"Entfernen"})})]},t)):(0,i.jsx)(eA.A,{children:(0,i.jsx)(ep.A,{colSpan:v?5:4,align:"center",children:(0,i.jsx)(h.A,{color:"text.secondary",children:"Keine Artikel in dieser Bestellung"})})}),(0,i.jsxs)(eA.A,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(ep.A,{colSpan:2}),(0,i.jsx)(ep.A,{align:"right",children:(0,i.jsx)(h.A,{fontWeight:600,children:"Gesamtsumme"})}),(0,i.jsx)(ep.A,{align:"right",children:(0,i.jsxs)(h.A,{fontWeight:600,children:[I.totalPrice.toFixed(2)," €"]})}),v&&(0,i.jsx)(ep.A,{})]})]})]})})]})})]}),(0,i.jsxs)(k.A,{open:M,onClose:()=>X(!1),children:[(0,i.jsx)(C.A,{children:"Bestellung l\xf6schen"}),(0,i.jsx)(P.A,{children:(0,i.jsx)(S.A,{children:"M\xf6chten Sie diese Bestellung wirklich l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."})}),(0,i.jsxs)(w.A,{children:[(0,i.jsx)(g.A,{onClick:()=>X(!1),children:"Abbrechen"}),(0,i.jsx)(g.A,{onClick:()=>{a(I.id),X(!1)},color:"error",children:"L\xf6schen"})]})]}),(0,i.jsx)(c.A,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:v?(0,i.jsx)(g.A,{variant:"outlined",color:"inherit",startIcon:(0,i.jsx)(ez.A,{}),onClick:()=>{confirm("M\xf6chten Sie den Bearbeitungsmodus verlassen? Ungespeicherte \xc4nderungen gehen verloren.")&&(W(!1),z({...t}),u({}))},sx:{mr:1},children:"Bearbeitung abbrechen"}):(0,i.jsx)(g.A,{variant:"outlined",color:"inherit",onClick:o,children:"Zur\xfcck zur \xdcbersicht"})})]})},eE=e=>({...e,status:e.status}),eN=()=>({customerName:"",items:[],totalPrice:0,status:"Pending",pickupDate:new Date().toISOString()}),eM=()=>{let e=(0,W.useRouter)(),t=(0,l.A)(),n=(0,r.A)(t.breakpoints.down("md")),[q,H]=(0,s.useState)(!0),[G,O]=(0,s.useState)([]),[R,L]=(0,s.useState)([]),[T,K]=(0,s.useState)([]),[U,_]=(0,s.useState)("weekly"),[Y,Z]=(0,s.useState)(null),[J,V]=(0,s.useState)(new Date),[ee,et]=(0,s.useState)(!1),[en,ei]=(0,s.useState)(null),[es,el]=(0,s.useState)("all"),[er,ea]=(0,s.useState)(null),[eo,ed]=(0,s.useState)(!1),[ec,ex]=(0,s.useState)(!1),[eh,eu]=(0,s.useState)(!1),em=(0,s.useCallback)(async()=>{try{let[e,t]=await Promise.all([F.A.getOrders(),F.A.getProducts()]);O(e),L(e),K(t)}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";console.error("Error fetching data:",e),ei("Failed to load data: ".concat(e))}finally{H(!1)}},[]);(0,s.useEffect)(()=>{"all"===es?L(G):L(G.filter(e=>e.status===es))},[es,G]),(0,s.useEffect)(()=>{em()},[em]),(0,s.useCallback)(()=>{e.push("/admin/dashboard")},[e]);let eA=(0,s.useCallback)(()=>{Z(null),_("detail")},[]),ep=(0,s.useCallback)(e=>{Z(e),_("form")},[]),ej=(0,s.useCallback)(e=>{V(e)},[]),eg=(0,s.useCallback)(e=>{V(e),et(!0)},[]),ey=(0,s.useCallback)(e=>{Z(e),_("detail")},[]),eb=(0,s.useCallback)(e=>{let t=G.find(t=>t.id===e);t&&(ea(t),ed(!0))},[G]),ef=(0,s.useCallback)(()=>{_("weekly"),Z(null),et(!1),eu(!1)},[]),ev=(0,s.useCallback)(async e=>{H(!0),ei(null);try{let t;Y?(t=await F.A.updateOrder(Y.id,e),O(e=>e.map(e=>e.id===Y.id?t:e))):(t=await F.A.createOrder(e),O(e=>[...e,t])),_("weekly"),Z(null),et(!1)}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";ei("Failed to save order: ".concat(e))}finally{H(!1)}},[Y]),ek=(0,s.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this order?")){H(!0),ei(null);try{await F.A.deleteOrder(e),O(t=>t.filter(t=>t.id!==e))}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";console.error("Error deleting order:",e),ei("Failed to delete order: ".concat(e))}finally{H(!1)}}},[]),eC=(0,s.useCallback)(()=>{e.push("/admin/orders/baking-list")},[e]);if(q)return(0,i.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,i.jsx)(o.A,{})});let eP=[{id:"id",label:"Bestell-ID",minWidth:80},{id:"customerName",label:"Kunde",minWidth:150},{id:"date",label:"Abholung",minWidth:120},{id:"status",label:"Status",minWidth:120,format:e=>(0,i.jsx)(d.A,{label:"Pending"===e?"Ausstehend":"Confirmed"===e?"Best\xe4tigt":"Completed"===e?"Abgeschlossen":"Cancelled"===e?"Storniert":e,color:"Pending"===e?"warning":"Confirmed"===e?"primary":"Completed"===e?"success":"Cancelled"===e?"error":"default",size:"small"})},{id:"totalItems",label:"Artikel",minWidth:80,align:"right"},{id:"totalPrice",label:"Gesamt",minWidth:100,align:"right"},{id:"actions",label:"Aktionen",minWidth:220,align:"center",format:(e,t)=>t?(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"center",gap:1},children:[(0,i.jsx)(M.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>{let e=G.find(e=>e.id===t.id);e&&ey(e)},children:"Details"}),(0,i.jsx)(M.A,{size:"small",variant:"outlined",onClick:()=>{let e=G.find(e=>e.id===t.id);e&&ep(e)},children:"Bearbeiten"}),(0,i.jsx)(M.A,{size:"small",variant:"outlined",color:"error",onClick:()=>eb(t.id),children:"L\xf6schen"})]}):null}];return(0,i.jsxs)(a.A,{maxWidth:"xl",children:[en&&(0,i.jsx)(x.A,{severity:"error",sx:{mb:2},onClose:()=>ei(null),children:en}),(0,i.jsxs)(c.A,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1},children:[(0,i.jsx)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,i.jsxs)(h.A,{variant:"h5",fontWeight:600,sx:{display:"flex",alignItems:"center",gap:1},children:["Bestellungen",(0,i.jsx)(u.A,{badgeContent:G.length,color:"primary",sx:{"& .MuiBadge-badge":{fontSize:"0.7rem",height:"18px",minWidth:"18px"}}})]})}),(0,i.jsxs)(c.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[!n&&"weekly"===U&&(0,i.jsxs)(m.A,{size:"small",variant:"outlined",sx:{minWidth:120},children:[(0,i.jsx)(A.A,{id:"status-filter-label",children:"Status"}),(0,i.jsxs)(p.A,{labelId:"status-filter-label",value:es,onChange:e=>el(e.target.value),label:"Status",size:"small",startAdornment:(0,i.jsx)(E.A,{fontSize:"small",sx:{mr:.5}}),children:[(0,i.jsx)(j.A,{value:"all",children:"Alle Status"}),(0,i.jsx)(j.A,{value:"Pending",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"warning",label:"Ausstehend"}),(0,i.jsx)(h.A,{variant:"body2",children:"Ausstehend"})]})}),(0,i.jsx)(j.A,{value:"Confirmed",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"primary",label:"Best\xe4tigt"}),(0,i.jsx)(h.A,{variant:"body2",children:"Best\xe4tigt"})]})}),(0,i.jsx)(j.A,{value:"Completed",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"success",label:"Abgeschlossen"}),(0,i.jsx)(h.A,{variant:"body2",children:"Abgeschlossen"})]})}),(0,i.jsx)(j.A,{value:"Cancelled",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"error",label:"Storniert"}),(0,i.jsx)(h.A,{variant:"body2",children:"Storniert"})]})})]})]}),(0,i.jsx)(g.A,{variant:"outlined",size:"small",color:"inherit",startIcon:(0,i.jsx)(B.A,{}),onClick:eC,children:"Backliste"}),"form"!==U&&(0,i.jsx)(g.A,{variant:"contained",size:"small",color:"primary",startIcon:(0,i.jsx)(I.A,{}),onClick:eA,children:"Neue Bestellung"})]})]}),(0,i.jsx)(c.A,{sx:{width:"100%",mb:3},children:(0,i.jsx)(y.A,{sx:{borderRadius:1,bgcolor:(0,b.X4)(t.palette.background.paper,.7)},elevation:0,children:(0,i.jsxs)(f.A,{value:U,onChange:(e,t)=>{_(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary",sx:{borderBottom:1,borderColor:"divider"},children:[(0,i.jsx)(v.A,{icon:(0,i.jsx)(z.A,{}),label:"Wochen\xfcbersicht",value:"weekly",iconPosition:"start",disabled:"detail"===U}),(0,i.jsx)(v.A,{icon:(0,i.jsx)(D.A,{}),label:"Tabelle",value:"table",iconPosition:"start",disabled:"detail"===U})]})})}),ee?(0,i.jsx)(Q,{products:T,selectedDate:J,onSave:ev,onCancel:()=>et(!1)}):"form"===U?(0,i.jsx)($,{products:T,order:Y?eE(Y):eN(),onSave:ev,onCancel:ef}):"detail"===U&&Y&&eh?(0,i.jsxs)(c.A,{children:[(0,i.jsx)(y.A,{elevation:0,sx:{p:2,mb:3,bgcolor:(0,b.X4)(t.palette.info.main,.08),borderLeft:"4px solid ".concat(t.palette.info.main),borderRadius:1},children:(0,i.jsxs)(h.A,{children:["Sie sehen die detaillierte Ansicht f\xfcr Bestellung #",Y.id," von Kunde"," ",(0,i.jsx)("strong",{children:Y.customerName}),"."]})}),(0,i.jsx)(eB,{order:Y,products:T,onSave:ev,onDelete:eb,onCancel:ef})]}):"weekly"===U?(0,i.jsx)(eW,{orders:R,onDateSelect:ej,onOrderClick:ey,onAddOrder:eg,onDeleteOrder:eb}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{sx:{mb:2,display:{xs:"block",md:"none"}},children:(0,i.jsxs)(m.A,{size:"small",variant:"outlined",fullWidth:!0,children:[(0,i.jsx)(A.A,{id:"mobile-status-filter-label",children:"Status Filter"}),(0,i.jsxs)(p.A,{labelId:"mobile-status-filter-label",value:es,onChange:e=>el(e.target.value),label:"Status Filter",size:"small",children:[(0,i.jsx)(j.A,{value:"all",children:"Alle Status"}),(0,i.jsx)(j.A,{value:"Pending",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"warning",label:"Ausstehend"}),(0,i.jsx)(h.A,{variant:"body2",children:"Ausstehend"})]})}),(0,i.jsx)(j.A,{value:"Confirmed",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"primary",label:"Best\xe4tigt"}),(0,i.jsx)(h.A,{variant:"body2",children:"Best\xe4tigt"})]})}),(0,i.jsx)(j.A,{value:"Completed",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"success",label:"Abgeschlossen"}),(0,i.jsx)(h.A,{variant:"body2",children:"Abgeschlossen"})]})}),(0,i.jsx)(j.A,{value:"Cancelled",children:(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(d.A,{size:"small",color:"error",label:"Storniert"}),(0,i.jsx)(h.A,{variant:"body2",children:"Storniert"})]})})]})]})}),(0,i.jsx)(X.A,{title:"Bestellungen",subtitle:"".concat(R.length," Kundenbestellung").concat(1!==R.length?"en":""," ").concat("all"!==es?"(Status: ".concat("Pending"===es?"Ausstehend":"Confirmed"===es?"Best\xe4tigt":"Completed"===es?"Abgeschlossen":"Cancelled"===es?"Storniert":es,")"):""),columns:eP,data:G.map(e=>{let t=(null==e?void 0:e.items)?e.items.reduce((e,t)=>e+(t.quantity||0),0):0,n=(null==e?void 0:e.totalPrice)?"$".concat(e.totalPrice.toFixed(2)):"$0.00";return{id:null==e?void 0:e.id,customerName:(null==e?void 0:e.customerName)||"Unknown",date:(null==e?void 0:e.pickupDate)?new Date(e.pickupDate).toLocaleDateString():"No date",status:(null==e?void 0:e.status)||"Unknown",totalItems:t,totalPrice:n}}),searchEnabled:!0,emptyMessage:"Keine Bestellungen vorhanden"})]}),"weekly"===U&&n&&(0,i.jsx)(c.A,{sx:{position:"fixed",bottom:20,right:20,zIndex:10},children:(0,i.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>eg(J),sx:{width:56,height:56,borderRadius:"50%",boxShadow:t.shadows[8]},children:(0,i.jsx)(I.A,{})})}),"table"===U&&(0,i.jsxs)(y.A,{elevation:0,sx:{p:2,mt:2,mb:4,bgcolor:(0,b.X4)(t.palette.info.main,.08),borderRadius:1,display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(N.A,{color:"info"}),(0,i.jsx)(h.A,{variant:"body2",children:'Klicken Sie auf "Details", um eine vollst\xe4ndige Ansicht der Bestellung zu sehen. Verwenden Sie "Bearbeiten", um \xc4nderungen vorzunehmen oder "L\xf6schen", um eine Bestellung zu entfernen.'})]}),(0,i.jsxs)(k.A,{open:eo,onClose:()=>ed(!1),children:[(0,i.jsx)(C.A,{children:"Bestellung l\xf6schen"}),(0,i.jsx)(P.A,{children:(0,i.jsx)(S.A,{children:"M\xf6chten Sie diese Bestellung wirklich l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."})}),(0,i.jsxs)(w.A,{children:[(0,i.jsx)(g.A,{onClick:()=>ed(!1),children:"Abbrechen"}),(0,i.jsx)(g.A,{onClick:()=>{er&&(ek(er.id),ed(!1),ex(!1))},color:"error",autoFocus:!0,children:"L\xf6schen"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8460,9670,7009,752,4756,413,2502,1580,5183,9152,2582,6277,6565,4737,6217,5320,876,4017,3729,1877,1455,2027,8946,8441,1684,7358],()=>t(45737)),_N_E=e.O()}]);