(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7575],{31025:(e,t,s)=>{"use strict";s.d(t,{X:()=>l});let l=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2})},71470:(e,t,s)=>{Promise.resolve().then(s.bind(s,83901))},83901:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var l=s(95155),i=s(12115),r=s(91767),a=s(6874),n=s.n(a),c=s(63159),d=s(89915),o=s(19494),u=s(16150),h=s(9670),x=s(55857),m=s(9815),A=s(78946),j=s(15876),g=s(18203),b=s(25949),v=s(72137),y=s(3967),p=s(33470),f=s(57236),C=s(91580),w=s(26096),P=s(44146),S=s(70556),E=s(30651),I=s(83200),k=s(31025);let N=[{id:"id",label:"ID"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"price",label:"Price"},{id:"stock",label:"Stock"},{id:"dailyTarget",label:"Daily Target"},{id:"status",label:"Status"},{id:"actions",label:"Actions"}];function W(e){let{products:t,onDelete:s}=e;return t&&0!==t.length?(0,l.jsx)(j.A,{component:g.A,sx:{mt:2},children:(0,l.jsxs)(b.A,{sx:{minWidth:650},"aria-label":"simple product table",children:[(0,l.jsx)(v.A,{children:(0,l.jsx)(y.A,{children:N.map(e=>(0,l.jsx)(p.A,{sx:{fontWeight:"bold"},children:e.label},e.id))})}),(0,l.jsx)(f.A,{children:t.map(e=>(0,l.jsxs)(y.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(p.A,{component:"th",scope:"row",children:e.id}),(0,l.jsx)(p.A,{children:e.name}),(0,l.jsx)(p.A,{children:e.category}),(0,l.jsx)(p.A,{children:k.X.format(e.price)}),(0,l.jsx)(p.A,{children:e.stock}),(0,l.jsx)(p.A,{children:e.dailyTarget}),(0,l.jsx)(p.A,{children:(0,l.jsx)(C.A,{label:e.isActive?"Active":"Inactive",color:e.isActive?"success":"error",size:"small"})}),(0,l.jsxs)(p.A,{children:[(0,l.jsx)(w.A,{title:"View Product",children:(0,l.jsx)(P.A,{component:n(),href:"/admin/products/".concat(e.id),size:"small",sx:{mr:.5},children:(0,l.jsx)(I.A,{})})}),(0,l.jsx)(w.A,{title:"Edit Product",children:(0,l.jsx)(P.A,{component:n(),href:"/admin/products/".concat(e.id),size:"small",sx:{mr:.5},children:(0,l.jsx)(S.A,{})})}),(0,l.jsx)(w.A,{title:"Delete Product",children:(0,l.jsx)(P.A,{onClick:()=>s(e.id),size:"small",color:"error",children:(0,l.jsx)(E.A,{})})})]})]},e.id))})]})}):(0,l.jsx)(h.A,{sx:{mt:2,textAlign:"center"},children:"No products to display."})}var z=s(90746),D=s(32582),_=s(77498),M=s(80329),T=s(26403),F=s(50095);function Q(e){let{categories:t,filterValues:s,onFilterChange:i}=e,r=e=>{i(e.target.name,e.target.value)};return(0,l.jsx)(u.A,{sx:{mb:3,p:2,border:"1px solid #ddd",borderRadius:"4px"},children:(0,l.jsxs)(z.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,l.jsx)(z.Ay,{item:!0,xs:12,sm:4,children:(0,l.jsx)(D.A,{fullWidth:!0,label:"Search by Name",name:"name",value:s.name,onChange:e=>{i(e.target.name,e.target.value)},variant:"outlined",size:"small"})}),(0,l.jsx)(z.Ay,{item:!0,xs:12,sm:4,children:(0,l.jsxs)(_.A,{fullWidth:!0,variant:"outlined",size:"small",children:[(0,l.jsx)(M.A,{id:"category-filter-label",children:"Category"}),(0,l.jsxs)(T.A,{labelId:"category-filter-label",label:"Category",name:"category",value:s.category,onChange:r,children:[(0,l.jsx)(F.A,{value:"",children:(0,l.jsx)("em",{children:"All Categories"})}),t.map(e=>(0,l.jsx)(F.A,{value:e,children:e},e))]})]})}),(0,l.jsx)(z.Ay,{item:!0,xs:12,sm:4,children:(0,l.jsxs)(_.A,{fullWidth:!0,variant:"outlined",size:"small",children:[(0,l.jsx)(M.A,{id:"status-filter-label",children:"Status"}),(0,l.jsxs)(T.A,{labelId:"status-filter-label",label:"Status",name:"status",value:s.status,onChange:r,children:[(0,l.jsx)(F.A,{value:"",children:(0,l.jsx)("em",{children:"All Statuses"})}),(0,l.jsx)(F.A,{value:"active",children:"Active"}),(0,l.jsx)(F.A,{value:"inactive",children:"Inactive"})]})]})})]})})}function L(){let e=(0,r.useQueryClient)(),{data:t,isLoading:s,isError:a,error:j}=(0,r.useQuery)("adminProducts",A.A.getProducts),g=(0,r.useMutation)(A.A.deleteProduct,{onSuccess:()=>{e.invalidateQueries("adminProducts")},onError:e=>{console.error("Error deleting product:",e.message)}}),[b,v]=i.useState({name:"",category:"",status:""}),y=i.useMemo(()=>t?Array.from(new Set(t.map(e=>e.category))).sort():[],[t]),p=i.useMemo(()=>t?t.filter(e=>{let t=e.name.toLowerCase().includes(b.name.toLowerCase()),s=!b.category||e.category===b.category,l=!0;return"active"===b.status?l=e.isActive:"inactive"===b.status&&(l=!e.isActive),t&&s&&l}):[],[t,b]);return s?(0,l.jsx)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4,display:"flex",justifyContent:"center"},children:(0,l.jsx)(d.A,{})}):a||!t?(0,l.jsx)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,l.jsxs)(o.A,{severity:"error",children:["Error fetching products:"," ",(null==j?void 0:j.message)||"Products data is unavailable."]})}):(0,l.jsxs)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,l.jsxs)(u.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,l.jsx)(h.A,{variant:"h4",component:"h1",children:"Product Management"}),(0,l.jsx)(x.A,{variant:"contained",component:n(),href:"/admin/products/new",startIcon:(0,l.jsx)(m.A,{}),children:"Add New Product"})]}),(0,l.jsx)(Q,{categories:y,filterValues:b,onFilterChange:(e,t)=>{v(s=>({...s,[e]:t}))}}),(0,l.jsx)(u.A,{sx:{mb:2},children:(0,l.jsxs)(h.A,{variant:"body1",children:["Showing ",(null==p?void 0:p.length)||0," of ",(null==t?void 0:t.length)||0," ","products."]})}),(0,l.jsx)(W,{products:p||[],onDelete:e=>{window.confirm("Are you sure you want to delete this product? This action cannot be undone.")&&g.mutate(e)}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8460,9670,7009,752,4756,413,2502,1580,5183,9152,7540,2582,6277,6565,1767,9996,8946,8441,1684,7358],()=>t(71470)),_N_E=e.O()}]);