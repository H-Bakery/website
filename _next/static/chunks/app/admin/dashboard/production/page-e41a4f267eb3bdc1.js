(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7961],{25158:(e,t,i)=>{Promise.resolve().then(i.bind(i,51430))},27377:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=i(90357)},28353:(e,t,i)=>{"use strict";var r=i(56620);t.A=void 0;var a=r(i(27377)),n=i(95155);t.A=(0,a.default)((0,n.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping")},30651:(e,t,i)=>{"use strict";var r=i(56620);t.A=void 0;var a=r(i(27377)),n=i(95155);t.A=(0,a.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},34131:(e,t,i)=>{"use strict";var r=i(56620);t.A=void 0;var a=r(i(27377)),n=i(95155);t.A=(0,a.default)((0,n.jsx)("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed")},41090:(e,t,i)=>{"use strict";i.d(t,{A:()=>l,K:()=>n});var r=i(57692),a=i(81112);function n(e){return(0,a.Ay)("MuiDivider",e)}let l=(0,r.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},41748:(e,t,i)=>{"use strict";var r=i(56620);t.A=void 0;var a=r(i(27377)),n=i(95155);t.A=(0,a.default)((0,n.jsx)("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"}),"Inventory")},51430:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>M});var r=i(95155),a=i(12115),n=i(63159),l=i(89915),s=i(16150),o=i(9670),c=i(19494),d=i(90746),u=i(91580),h=i(41748),m=i(28353),p=i(30651),g=i(34131),f=i(52661),x=i(43189),v=i(71214),A=i(22657),b=i(73746),y=i(80158),j=i(18203),w=i(83540),k=i(3401),S=i(94754),W=i(96025),_=i(16238),D=i(94517),z=i(24026),L=i(83394);let P=e=>{let{title:t,subtitle:i,data:a,valueLabel:n="Actual",targetLabel:l="Target",height:c=300,showTarget:d=!0}=e,u=(0,b.A)(),h=a.map((e,t)=>({...e,color:e.color||u.palette.primary.main}));return(0,r.jsxs)(j.A,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(o.A,{variant:"h6",component:"h3",gutterBottom:!0,children:t}),i&&(0,r.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:i}),(0,r.jsx)(s.A,{sx:{flexGrow:1,width:"100%"},children:(0,r.jsx)(w.u,{width:"100%",height:c,children:(0,r.jsxs)(k.E,{data:h,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[(0,r.jsx)(S.d,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),(0,r.jsx)(W.W,{type:"number"}),(0,r.jsx)(_.h,{dataKey:"name",type:"category"}),(0,r.jsx)(D.m,{content:(0,r.jsx)(e=>{let{active:t,payload:i,label:a}=e;if(t&&i&&i.length){let e=i[0].payload,t=e.value,s=e.target||0,o=s?(t/s*100).toFixed(1):null;return(0,r.jsxs)("div",{style:{backgroundColor:"#fff",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[(0,r.jsx)("p",{style:{margin:0,fontWeight:"bold"},children:"".concat(a)}),(0,r.jsx)("p",{style:{margin:"5px 0 0",color:i[0].color},children:"".concat(n,": ").concat(t)}),d&&s>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{style:{margin:"5px 0 0",color:u.palette.secondary.main},children:"".concat(l,": ").concat(s)}),(0,r.jsx)(y.A,{sx:{my:1}}),(0,r.jsx)("p",{style:{margin:0,fontWeight:"bold"},children:"Achievement: ".concat(o,"%")})]})]})}return null},{})}),(0,r.jsx)(z.s,{}),(0,r.jsx)(L.y,{dataKey:"value",name:n,fill:u.palette.primary.main,children:h.map((e,t)=>(0,r.jsx)(L.y,{dataKey:"value",fill:e.color},"bar-".concat(t)))}),d&&(0,r.jsx)(L.y,{dataKey:"target",name:l,fill:u.palette.secondary.main})]})})})]})};var C=i(78946);let M=()=>{let[e,t]=(0,a.useState)("day"),[i,b]=(0,a.useState)(!0),[y,j]=(0,a.useState)(null),[w,k]=(0,a.useState)([]),[S,W]=(0,a.useState)([]),[_,D]=(0,a.useState)([]),[z,L]=(0,a.useState)([]),[M,E]=(0,a.useState)([]),[K,T]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{b(!0),j(null);try{let t=await C.A.getProductionData(e);k(t);let i=await C.A.getInventoryData();W(i);let r=await C.A.getStaffData();D(r.filter(e=>"B\xe4ckermeister"===e.role||"B\xe4cker"===e.role||"Konditorin"===e.role));let a=await C.A.getTimeSeriesData("production",e);L(a);let n=await C.A.getTimeSeriesData("waste",e);E(n);let l=await C.A.getSummaryData(e);T(l)}catch(e){console.error("Error fetching production data:",e),j("Beim Laden der Produktionsdaten ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{b(!1)}})()},[e]);let B=()=>S.filter(e=>e.quantity<=1.2*e.min_stock_level);return(0,r.jsx)(r.Fragment,{children:i?(0,r.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,r.jsx)(l.A,{})}):(0,r.jsxs)(n.A,{maxWidth:"xl",children:[(0,r.jsxs)(s.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,r.jsx)(o.A,{variant:"h4",component:"h1",children:"Backstube: Produktions\xfcbersicht"}),(0,r.jsx)(f.A,{timeRange:e,onTimeRangeChange:e=>{t(e)}})]}),y&&(0,r.jsx)(c.A,{severity:"error",sx:{mb:4},onClose:()=>{j(null)},children:y}),K&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,r.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsx)(x.A,{title:"Gesamtproduktion",value:K.totalProduced,unit:" St\xfcck",icon:(0,r.jsx)(h.A,{}),color:"#4caf50",tooltip:"Gesamtzahl der produzierten Artikel im ausgew\xe4hlten Zeitraum"})}),(0,r.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsx)(x.A,{title:"Verkaufte Artikel",value:K.totalItems,unit:" St\xfcck",icon:(0,r.jsx)(m.A,{}),color:"#2196f3",tooltip:"Gesamtzahl der verkauften Artikel im ausgew\xe4hlten Zeitraum"})}),(0,r.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsx)(x.A,{title:"Ausschuss",value:K.totalWaste,unit:" St\xfcck",icon:(0,r.jsx)(p.A,{}),color:"#f44336",tooltip:"Gesamtmenge an Ausschuss im ausgew\xe4hlten Zeitraum"})}),(0,r.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsx)(x.A,{title:"Ausschussrate",value:K.wastageRate.toFixed(1),unit:"%",icon:(0,r.jsx)(g.A,{}),color:"#ff9800",tooltip:"Prozentsatz der Produktion, der verschwendet wurde"})})]}),B().length>0&&(0,r.jsxs)(c.A,{severity:"warning",sx:{mb:4},children:[(0,r.jsx)(o.A,{variant:"subtitle1",component:"div",sx:{fontWeight:"bold"},children:"Warnung: Niedriger Lagerbestand"}),(0,r.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:B().map(e=>(0,r.jsx)(u.A,{label:"".concat(e.name,": ").concat(e.quantity," ").concat(e.unit," verbleibend"),color:"warning",size:"small"},e.id))})]}),(0,r.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,r.jsx)(d.Ay,{item:!0,xs:12,md:8,children:(0,r.jsx)(v.A,{title:"Produktion & Ausschuss",subtitle:"Trends f\xfcr Produktion und Ausschuss im Zeitraum: ".concat(e),type:"line",data:(()=>{let e=[],t={};return z.forEach(e=>{t[e.date]={date:e.date,production:e.value,waste:0}}),M.forEach(e=>{t[e.date]?t[e.date].waste=e.value:t[e.date]={date:e.date,production:0,waste:e.value}}),Object.values(t).forEach(t=>e.push(t)),e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),e})(),dataKeys:{x:"date",y:["production","waste"],colors:["#4caf50","#f44336"]},height:300})}),(0,r.jsx)(d.Ay,{item:!0,xs:12,md:4,children:(0,r.jsx)(v.A,{title:"Produktion nach Kategorie",subtitle:"Verteilung der Produkte nach Kategorie",type:"pie",data:(()=>{let e={};return w.forEach(t=>{let i=t.product_name,r="Sonstiges";i.includes("Brot")||i.includes("Baguette")?r="Brot":i.includes("Kuchen")||i.includes("T\xf6rtchen")?r="Kuchen":i.includes("Geb\xe4ck")||i.includes("Croissant")||i.includes("Br\xf6tchen")?r="Geb\xe4ck":i.includes("Torte")&&(r="Torten"),e[r]=(e[r]||0)+t.quantity_produced}),Object.entries(e).map(e=>{let[t,i]=e;return{name:t,value:i}})})(),dataKeys:{x:"name",y:"value",colors:["#4caf50","#2196f3","#ff9800","#9c27b0","#607d8b"]},height:300})})]}),(0,r.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,r.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,r.jsx)(P,{title:"Mitarbeiterproduktivit\xe4t",subtitle:"Leistungsmetriken des Backstubenpersonals",data:_.map(e=>({name:e.name,value:e.productivity,target:90,color:e.productivity>=90?"#4caf50":e.productivity>=80?"#ff9800":"#f44336"})),valueLabel:"Produktivit\xe4tswert",targetLabel:"Zielwert",height:300})}),(0,r.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,r.jsx)(A.A,{title:"Bestandsstatus",subtitle:"Aktuelle Lagerbest\xe4nde",columns:[{id:"name",label:"Zutat",minWidth:120},{id:"quantity",label:"Menge",minWidth:80,align:"right"},{id:"unit",label:"Einheit",minWidth:60},{id:"status",label:"Status",minWidth:100,align:"center",format:e=>(0,r.jsx)(u.A,{label:e,color:"Kritisch"===e?"error":"Nachbestellen"===e?"warning":"success",size:"small"})},{id:"last_restocked",label:"Letzte Auff\xfcllung",minWidth:120}],data:S.map(e=>({id:e.id,name:e.name,quantity:e.quantity,unit:e.unit,status:e.quantity<=e.min_stock_level?"Kritisch":e.quantity<=1.5*e.min_stock_level?"Nachbestellen":"OK",last_restocked:new Date(e.last_restocked).toLocaleDateString()})),searchEnabled:!0,emptyMessage:"Keine Bestandsdaten verf\xfcgbar"})})]}),(0,r.jsx)(d.Ay,{container:!0,spacing:3,children:(0,r.jsx)(d.Ay,{item:!0,xs:12,children:(0,r.jsx)(A.A,{title:"Produktionsaufzeichnungen",subtitle:"Detaillierte Produktionsdaten f\xfcr den ausgew\xe4hlten Zeitraum",columns:[{id:"date",label:"Datum",minWidth:100},{id:"product",label:"Produkt",minWidth:150},{id:"quantity",label:"Produziert",minWidth:100,align:"right"},{id:"waste",label:"Ausschuss",minWidth:100,align:"right"},{id:"efficiency",label:"Effizienz",minWidth:100,align:"right",format:e=>{let t=parseFloat(e),i="#4caf50";return t<90&&(i="#ff9800"),t<80&&(i="#f44336"),(0,r.jsx)(o.A,{component:"span",sx:{color:i,fontWeight:"medium"},children:e})}},{id:"staff",label:"Mitarbeiter",minWidth:120}],data:w.map(e=>({id:e.id,date:new Date(e.date).toLocaleDateString(),product:e.product_name,quantity:e.quantity_produced,waste:e.waste,staff:e.staff_name,efficiency:((e.quantity_produced-e.waste)/e.quantity_produced*100).toFixed(1)+"%"})),searchEnabled:!0,emptyMessage:"Keine Produktionsdaten f\xfcr den ausgew\xe4hlten Zeitraum verf\xfcgbar"})})})]})]})})}},63488:(e,t,i)=>{"use strict";i.d(t,{A:()=>l,b:()=>n});var r=i(57692),a=i(81112);function n(e){return(0,a.Ay)("MuiListItemText",e)}let l=(0,r.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},80158:(e,t,i)=>{"use strict";i.d(t,{A:()=>v});var r=i(93495),a=i(79630),n=i(12115),l=i(52596),s=i(15386),o=i(62282),c=i(35881),d=i(82700),u=i(41090),h=i(95155);let m=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],p=e=>{let{absolute:t,children:i,classes:r,flexItem:a,light:n,orientation:l,textAlign:o,variant:c}=e;return(0,s.A)({root:["root",t&&"absolute",c,n&&"light","vertical"===l&&"vertical",a&&"flexItem",i&&"withChildren",i&&"vertical"===l&&"withChildrenVertical","right"===o&&"vertical"!==l&&"textAlignRight","left"===o&&"vertical"!==l&&"textAlignLeft"],wrapper:["wrapper","vertical"===l&&"wrapperVertical"]},u.K,r)},g=(0,c.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.absolute&&t.absolute,t[i.variant],i.light&&t.light,"vertical"===i.orientation&&t.vertical,i.flexItem&&t.flexItem,i.children&&t.withChildren,i.children&&"vertical"===i.orientation&&t.withChildrenVertical,"right"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignRight,"left"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignLeft]}})(e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},i.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},i.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,o.X4)(t.palette.divider,.08)},"inset"===i.variant&&{marginLeft:72},"middle"===i.variant&&"horizontal"===i.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===i.variant&&"vertical"===i.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===i.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},i.flexItem&&{alignSelf:"stretch",height:"auto"})},e=>{let{ownerState:t}=e;return(0,a.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})},e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({},i.children&&"vertical"!==i.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}})},e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({},i.children&&"vertical"===i.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}})},e=>{let{ownerState:t}=e;return(0,a.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})}),f=(0,c.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.wrapper,"vertical"===i.orientation&&t.wrapperVertical]}})(e=>{let{theme:t,ownerState:i}=e;return(0,a.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===i.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})}),x=n.forwardRef(function(e,t){let i=(0,d.b)({props:e,name:"MuiDivider"}),{absolute:n=!1,children:s,className:o,component:c=s?"div":"hr",flexItem:u=!1,light:x=!1,orientation:v="horizontal",role:A="hr"!==c?"separator":void 0,textAlign:b="center",variant:y="fullWidth"}=i,j=(0,r.A)(i,m),w=(0,a.A)({},i,{absolute:n,component:c,flexItem:u,light:x,orientation:v,role:A,textAlign:b,variant:y}),k=p(w);return(0,h.jsx)(g,(0,a.A)({as:c,className:(0,l.A)(k.root,o),role:A,ref:t,ownerState:w},j,{children:s?(0,h.jsx)(f,{className:k.wrapper,ownerState:w,children:s}):null}))});x.muiSkipListHighlight=!0;let v=x},90357:(e,t,i)=>{"use strict";i.r(t),i.d(t,{capitalize:()=>a.A,createChainedFunction:()=>n,createSvgIcon:()=>l.A,debounce:()=>s.A,deprecatedPropType:()=>o,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>h,setRef:()=>m,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>p.A,unstable_useId:()=>g.A,unsupportedProp:()=>f,useControlled:()=>x.A,useEventCallback:()=>v.A,useForkRef:()=>A.A,useIsFocusVisible:()=>b.A});var r=i(11326),a=i(39571);let n=i(64816).A;var l=i(89019),s=i(90278);let o=function(e,t){return()=>null};var c=i(73668),d=i(65281),u=i(58316);i(79630);let h=function(e,t){return()=>null},m=i(31348).A;var p=i(31947),g=i(39485);let f=function(e,t,i,r,a){return null};var x=i(25974),v=i(3243),A=i(90701),b=i(26058);let y={configure:e=>{r.A.configure(e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[8460,9670,7009,752,4756,413,2502,1580,5183,9152,2582,6277,6565,6217,4017,9197,6269,8946,164,8441,1684,7358],()=>t(25158)),_N_E=e.O()}]);