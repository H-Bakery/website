(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7694],{83969:(e,t,a)=>{Promise.resolve().then(a.bind(a,86344))},86344:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var i=a(95155),s=a(12115),n=a(63159),r=a(89915),l=a(16150),o=a(9670),c=a(19494),d=a(90746),u=a(91580),m=a(16537),h=a(68502),x=a(66486),g=a(99975),p=a(90951),f=a(95372),A=a(52661),y=a(43189),b=a(71214),v=a(22657),j=a(25991),k=a(78946);let S=()=>{let[e,t]=(0,s.useState)("day"),[a,S]=(0,s.useState)(!0),[_,w]=(0,s.useState)(null),[W,z]=(0,s.useState)([]),[K,C]=(0,s.useState)([]),[M,V]=(0,s.useState)([]),[B,T]=(0,s.useState)([]),[q,D]=(0,s.useState)([]),[O,P]=(0,s.useState)(null),[E,F]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{S(!0),w(null);try{let t=await k.A.getSalesData(e);z(t);let a=await k.A.getCustomerData();C(a);let i=await k.A.getProducts();V(i);let s=await k.A.getTimeSeriesData("sales",e);T(s);try{let t=await k.A.getTimeSeriesData("customers",e);D(t)}catch(t){let e=s.map(e=>({...e,value:Math.max(1,Math.floor(e.value/(5*Math.random()+10)))}));D(e)}let n=await k.A.getSummaryData(e);P(n);let r=await k.A.getSummaryData(e);F(r)}catch(e){console.error("Error fetching sales data:",e),w("Beim Laden der Verkaufsdaten ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{S(!1)}})()},[e]);let I=(e,t)=>0===t?100*(e>0):(e-t)/t*100;return(0,i.jsx)(i.Fragment,{children:a?(0,i.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,i.jsx)(r.A,{})}):(0,i.jsxs)(n.A,{maxWidth:"xl",children:[(0,i.jsxs)(l.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)(o.A,{variant:"h4",component:"h1",children:"Verkaufsbereich: Umsatz\xfcbersicht"}),(0,i.jsx)(A.A,{timeRange:e,onTimeRangeChange:e=>{t(e)}})]}),_&&(0,i.jsx)(c.A,{severity:"error",sx:{mb:4},onClose:()=>{w(null)},children:_}),O&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(y.A,{title:"Gesamtumsatz",value:"".concat(O.totalSales.toFixed(2)," €"),icon:(0,i.jsx)(g.A,{}),percentageChange:I(O.totalSales,(null==E?void 0:E.totalSales)||0),color:"#4caf50",tooltip:"Gesamtumsatz im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(y.A,{title:"Transaktionen",value:O.transactions,icon:(0,i.jsx)(x.A,{}),percentageChange:I(O.transactions,(null==E?void 0:E.transactions)||0),color:"#2196f3",tooltip:"Anzahl der Verk\xe4ufe im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(y.A,{title:"\xd8 Bestellwert",value:"".concat(O.averageOrderValue.toFixed(2)," €"),icon:(0,i.jsx)(p.A,{}),percentageChange:I(O.averageOrderValue,(null==E?void 0:E.averageOrderValue)||0),color:"#ff9800",tooltip:"Durchschnittlicher Wert pro Transaktion"})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(y.A,{title:"Verkaufte Artikel",value:O.totalItems,icon:(0,i.jsx)(x.A,{}),percentageChange:I(O.totalItems,(null==E?void 0:E.totalItems)||0),color:"#9c27b0",tooltip:"Gesamtzahl der verkauften Artikel"})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(y.A,{title:"Konversionsrate",value:"".concat((O.transactions/O.uniqueTransactions*100).toFixed(1),"%"),icon:(0,i.jsx)(f.A,{}),percentageChange:I(O.transactions/O.uniqueTransactions,E?E.transactions/E.uniqueTransactions:0),color:"#607d8b",tooltip:"Prozentsatz der Laden-Besucher, die einen Kauf get\xe4tigt haben"})})]}),(0,i.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(d.Ay,{item:!0,xs:12,md:8,children:(0,i.jsx)(b.A,{title:"Umsatzentwicklung",subtitle:"Umsatztrend f\xfcr den Zeitraum: ".concat(e),type:"area",data:B,dataKeys:{x:"date",y:["value"],colors:["#4caf50"]},height:300})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(b.A,{title:"Meistverkaufte Produkte",subtitle:"Top-Produkte nach verkaufter Menge",type:"bar",data:(()=>{let e={};return W.forEach(t=>{e[t.product_id]||(e[t.product_id]={name:t.product_name,quantity:0}),e[t.product_id].quantity+=t.quantity}),Object.values(e).sort((e,t)=>t.quantity-e.quantity).slice(0,5).map(e=>({name:e.name,value:e.quantity}))})(),dataKeys:{x:"name",y:"value",colors:["#2196f3"]},height:300})})]}),(0,i.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(b.A,{title:"Zahlungsarten",subtitle:"Umsatz nach Zahlungsart",type:"pie",data:(()=>{let e={};return W.forEach(t=>{e[t.payment_method]||(e[t.payment_method]=0),e[t.payment_method]+=t.total}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}})})(),dataKeys:{x:"name",y:"value",colors:["#4caf50","#2196f3","#ff9800","#9c27b0"]},height:300})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(j.A,{title:"Verkaufsleistung",subtitle:"Vergleich mit vorherigem Zeitraum",previousPeriodLabel:"vorheriger ".concat(e),items:[{label:"Gesamtumsatz",current:O.totalSales,previous:(null==E?void 0:E.totalSales)||0,unit:"€",color:"#4caf50",isHigherBetter:!0},{label:"Transaktionen",current:O.transactions,previous:(null==E?void 0:E.transactions)||0,color:"#2196f3",isHigherBetter:!0},{label:"Durchschn. Bestellwert",current:O.averageOrderValue,previous:(null==E?void 0:E.averageOrderValue)||0,unit:"€",color:"#ff9800",isHigherBetter:!0},{label:"Verkaufte Artikel",current:O.totalItems,previous:(null==E?void 0:E.totalItems)||0,color:"#9c27b0",isHigherBetter:!0}]})})]}),(0,i.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(v.A,{title:"Produktbestand",subtitle:"Aktuelle Lagerbest\xe4nde f\xfcr den Verkauf",columns:[{id:"name",label:"Produkt",minWidth:150},{id:"price",label:"Preis",minWidth:80,align:"right",format:e=>"".concat(e.toFixed(2)," €")},{id:"stock",label:"Bestand",minWidth:70,align:"right"},{id:"status",label:"Status",minWidth:120,align:"center",format:e=>(0,i.jsx)(u.A,{label:e,color:"Kritisch"===e?"error":"Mittel"===e?"warning":"success",size:"small"})}],data:M.map(e=>({id:e.id,name:e.name,price:e.price,stock:e.stock,status:e.stock<10?"Kritisch":e.stock<30?"Mittel":"Gut"})),searchEnabled:!0,emptyMessage:"Keine Produktdaten verf\xfcgbar"})}),(0,i.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(v.A,{title:"Top-Kunden",subtitle:"Kunden mit dem h\xf6chsten Umsatz",columns:[{id:"name",label:"Kunde",minWidth:150,format:e=>(0,i.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(m.A,{sx:{mr:1,bgcolor:"#"+Math.floor(0xffffff*Math.random()).toString(16)},children:e.charAt(0)}),(0,i.jsx)(o.A,{variant:"body2",children:e})]})},{id:"visits",label:"Besuche",minWidth:80,align:"center"},{id:"total_spent",label:"Ausgegeben",minWidth:120,align:"right",format:e=>"".concat(e.toFixed(2)," €")},{id:"loyalty",label:"Treue",minWidth:150,format:e=>(0,i.jsx)(h.A,{value:e,readOnly:!0,precision:.5,size:"small"})}],data:K.sort((e,t)=>t.total_spent-e.total_spent).slice(0,10).map(e=>({id:e.id,name:e.name,visits:e.visits,total_spent:e.total_spent,last_visit:e.last_visit,loyalty:Math.min(5,e.visits/5)})),emptyMessage:"Keine Kundendaten verf\xfcgbar"})})]}),(0,i.jsx)(d.Ay,{container:!0,spacing:3,children:(0,i.jsx)(d.Ay,{item:!0,xs:12,children:(0,i.jsx)(v.A,{title:"Letzte Transaktionen",subtitle:"Aktuelle Verkaufstransaktionen",columns:[{id:"id",label:"Bestell-ID",minWidth:80},{id:"date",label:"Datum",minWidth:100},{id:"product",label:"Produkt",minWidth:150},{id:"quantity",label:"Menge",minWidth:80,align:"right"},{id:"total",label:"Gesamt",minWidth:100,align:"right",format:e=>(0,i.jsx)(o.A,{component:"span",sx:{color:"#4caf50",fontWeight:"medium"},children:e})},{id:"payment",label:"Zahlungsart",minWidth:150,format:e=>(0,i.jsx)(u.A,{label:e,size:"small",color:"Bargeld"===e?"success":"EC-Karte"===e?"primary":"Kreditkarte"===e?"info":"default"})}],data:W.map(e=>({id:e.id,date:new Date(e.date).toLocaleDateString(),product:e.product_name,quantity:e.quantity,total:"".concat(e.total.toFixed(2)," €"),payment:e.payment_method})),searchEnabled:!0,emptyMessage:"Keine Verkaufsdaten f\xfcr den ausgew\xe4hlten Zeitraum verf\xfcgbar"})})})]})]})})}},90951:(e,t,a)=>{"use strict";var i=a(56620);t.A=void 0;var s=i(a(27377)),n=a(95155);t.A=(0,s.default)((0,n.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")}},e=>{var t=t=>e(e.s=t);e.O(0,[8460,9670,7009,752,4756,413,2502,1580,5183,9152,2582,6277,6565,4737,6217,4017,9197,6269,5278,8946,164,3174,8441,1684,7358],()=>t(83969)),_N_E=e.O()}]);