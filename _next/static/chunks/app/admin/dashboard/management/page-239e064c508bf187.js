(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9449],{32058:(e,t,a)=>{Promise.resolve().then(a.bind(a,36023))},35695:(e,t,a)=>{"use strict";var n=a(18999);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useServerInsertedHTML")&&a.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},36023:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(95155),i=a(12115),r=a(63159),s=a(89915),l=a(16150),o=a(9670),c=a(54265),u=a(90746),d=a(35695),m=a(99975),g=a(95372),h=a(66486),x=a(52661),p=a(43189),f=a(71214),v=a(22657),A=a(25991),j=a(78946);let y=()=>{(0,d.useRouter)();let[e,t]=(0,i.useState)("day"),[a,y]=(0,i.useState)(!0),[b,w]=(0,i.useState)(null),[S,k]=(0,i.useState)(null),[z,F]=(0,i.useState)([]),[C,D]=(0,i.useState)([]),[M,B]=(0,i.useState)([]),[P,T]=(0,i.useState)([]),[W,H]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{y(!0),w(null);try{let t=await j.A.getSummaryData(e);k(t);let a=await j.A.getSummaryData(e);H(a);let n=await j.A.getTimeSeriesData("sales",e);F(n);try{let t=await j.A.getTimeSeriesData("sales",e);D(t)}catch(t){let e=n.map(e=>({...e,value:.35*e.value}));D(e)}let i=await j.A.getProducts();B(i);let r=await j.A.getFinancialData(e);T(r)}catch(e){console.error("Error fetching dashboard data:",e),w("Beim Laden der Daten ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{y(!1)}})()},[e]);let L=(e,t)=>0===t?100*(e>0):(e-t)/t*100;return(0,n.jsx)(n.Fragment,{children:a?(0,n.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,n.jsx)(s.A,{})}):(0,n.jsxs)(r.A,{maxWidth:"xl",children:[(0,n.jsxs)(l.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,n.jsx)(o.A,{variant:"h4",component:"h1",children:"Verwaltung: Finanzkennzahlen"}),(0,n.jsx)(x.A,{timeRange:e,onTimeRangeChange:e=>{t(e)}})]}),b&&(0,n.jsx)(c.A,{severity:"error",sx:{mb:4},onClose:()=>{w(null)},children:b}),S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,n.jsx)(p.A,{title:"Gesamtumsatz",value:"".concat(S.revenue.toFixed(2)," €"),icon:(0,n.jsx)(m.A,{}),percentageChange:L(S.revenue,(null==W?void 0:W.revenue)||0),color:"#4caf50",tooltip:"Gesamtumsatz im ausgew\xe4hlten Zeitraum"})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,n.jsx)(p.A,{title:"Nettogewinn",value:"".concat(S.profit.toFixed(2)," €"),icon:(0,n.jsx)(g.A,{}),percentageChange:L(S.profit,(null==W?void 0:W.profit)||0),color:"#2196f3",tooltip:"Nettogewinn nach allen Ausgaben im ausgew\xe4hlten Zeitraum"})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,n.jsx)(p.A,{title:"Transaktionen",value:S.transactions,icon:(0,n.jsx)(h.A,{}),percentageChange:L(S.transactions,(null==W?void 0:W.transactions)||0),color:"#ff9800",tooltip:"Anzahl der Verkaufstransaktionen im ausgew\xe4hlten Zeitraum"})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,n.jsx)(p.A,{title:"Gewinnmarge",value:"".concat(S.profitMargin.toFixed(1),"%"),icon:(0,n.jsx)(g.A,{}),percentageChange:L(S.profitMargin,(null==W?void 0:W.profitMargin)||0),color:"#9c27b0",tooltip:"Gewinn als Prozentsatz des Umsatzes"})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,n.jsx)(p.A,{title:"Durchsch. Bestellwert",value:"".concat(S.averageOrderValue.toFixed(2)," €"),icon:(0,n.jsx)(m.A,{}),percentageChange:L(S.averageOrderValue,(null==W?void 0:W.averageOrderValue)||0),color:"#f44336",tooltip:"Durchschnittlicher Wert pro Transaktion"})})]}),(0,n.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,n.jsx)(u.Ay,{item:!0,xs:12,md:8,children:(0,n.jsx)(f.A,{title:"Umsatzentwicklung",subtitle:"Umsatzentwicklung f\xfcr den ausgew\xe4hlten Zeitraum: ".concat(e),type:"area",data:z,dataKeys:{x:"date",y:["value"],colors:["#4caf50"]},height:300})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,n.jsx)(A.A,{title:"Finanzielle Leistung",subtitle:"Vergleich mit vorherigem Zeitraum",previousPeriodLabel:"vorheriger ".concat(e),items:[{label:"Umsatz",current:S.revenue,previous:(null==W?void 0:W.revenue)||0,unit:"€",color:"#4caf50",isHigherBetter:!0},{label:"Ausgaben",current:S.expenses,previous:(null==W?void 0:W.expenses)||0,unit:"€",color:"#f44336",isHigherBetter:!1},{label:"Nettogewinn",current:S.profit,previous:(null==W?void 0:W.profit)||0,unit:"€",color:"#2196f3",isHigherBetter:!0},{label:"Gewinnmarge",current:S.profitMargin,previous:(null==W?void 0:W.profitMargin)||0,unit:"%",color:"#9c27b0",isHigherBetter:!0}]})})]}),(0,n.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,n.jsx)(u.Ay,{item:!0,xs:12,md:5,children:(0,n.jsx)(f.A,{title:"Produktleistung",subtitle:"Top-Produkte nach Gewinnmarge",type:"bar",data:M.filter(e=>e.cost>0).map(e=>({name:e.name,profit:e.price-e.cost,margin:(e.price-e.cost)/e.price*100})).sort((e,t)=>t.margin-e.margin).slice(0,5),dataKeys:{x:"name",y:"margin",colors:["#3f51b5"]},height:350})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,md:7,children:(0,n.jsx)(v.A,{title:"Finanztransaktionen",subtitle:"Aktuelle finanzielle Aktivit\xe4ten",columns:[{id:"date",label:"Datum",minWidth:100},{id:"category",label:"Kategorie",minWidth:150},{id:"amount",label:"Betrag",minWidth:120,align:"right",format:e=>{let t=e.startsWith("-");return(0,n.jsx)(o.A,{component:"span",sx:{color:t?"#f44336":"#4caf50",fontWeight:"medium"},children:e})}},{id:"description",label:"Beschreibung",minWidth:200}],data:P.map(e=>({id:e.id,date:new Date(e.date).toLocaleDateString(),category:e.category,amount:"".concat(e.amount<0?"-":"").concat(Math.abs(e.amount).toFixed(2)," €"),description:e.description})),searchEnabled:!0,emptyMessage:"Keine Finanzdaten f\xfcr den ausgew\xe4hlten Zeitraum verf\xfcgbar"})})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4056,752,7723,413,746,2502,5183,4865,4737,3831,2729,7184,7617,346,5560,206,8946,164,3174,8441,1684,7358],()=>t(32058)),_N_E=e.O()}]);