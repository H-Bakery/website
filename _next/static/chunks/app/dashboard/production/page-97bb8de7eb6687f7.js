(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6565],{8896:(e,t,a)=>{Promise.resolve().then(a.bind(a,63300))},28353:(e,t,a)=>{"use strict";var i=a(56620);t.A=void 0;var s=i(a(27377)),n=a(95155);t.A=(0,s.default)((0,n.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping")},30651:(e,t,a)=>{"use strict";var i=a(56620);t.A=void 0;var s=i(a(27377)),n=a(95155);t.A=(0,s.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},34131:(e,t,a)=>{"use strict";var i=a(56620);t.A=void 0;var s=i(a(27377)),n=a(95155);t.A=(0,s.default)((0,n.jsx)("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed")},63300:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var i=a(95155),s=a(12115),n=a(63159),r=a(89915),l=a(16150),d=a(9670),c=a(54265),o=a(90746),u=a(91580),h=a(41748),m=a(28353),x=a(30651),g=a(34131),p=a(19338),f=a(52661),y=a(43189),A=a(71214),j=a(22657),b=a(73746),v=a(80158),k=a(18203),w=a(83540),S=a(3401),_=a(94754),W=a(96025),z=a(16238),D=a(94517),P=a(24026),K=a(83394);let E=e=>{let{title:t,subtitle:a,data:s,valueLabel:n="Actual",targetLabel:r="Target",height:c=300,showTarget:o=!0}=e,u=(0,b.A)(),h=s.map((e,t)=>({...e,color:e.color||u.palette.primary.main}));return(0,i.jsxs)(k.A,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(d.A,{variant:"h6",component:"h3",gutterBottom:!0,children:t}),a&&(0,i.jsx)(d.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:a}),(0,i.jsx)(l.A,{sx:{flexGrow:1,width:"100%"},children:(0,i.jsx)(w.u,{width:"100%",height:c,children:(0,i.jsxs)(S.E,{data:h,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[(0,i.jsx)(_.d,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),(0,i.jsx)(W.W,{type:"number"}),(0,i.jsx)(z.h,{dataKey:"name",type:"category"}),(0,i.jsx)(D.m,{content:(0,i.jsx)(e=>{let{active:t,payload:a,label:s}=e;if(t&&a&&a.length){let e=a[0].payload,t=e.value,l=e.target||0,d=l?(t/l*100).toFixed(1):null;return(0,i.jsxs)("div",{style:{backgroundColor:"#fff",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[(0,i.jsx)("p",{style:{margin:0,fontWeight:"bold"},children:"".concat(s)}),(0,i.jsx)("p",{style:{margin:"5px 0 0",color:a[0].color},children:"".concat(n,": ").concat(t)}),o&&l>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{style:{margin:"5px 0 0",color:u.palette.secondary.main},children:"".concat(r,": ").concat(l)}),(0,i.jsx)(v.A,{sx:{my:1}}),(0,i.jsx)("p",{style:{margin:0,fontWeight:"bold"},children:"Achievement: ".concat(d,"%")})]})]})}return null},{})}),(0,i.jsx)(P.s,{}),(0,i.jsx)(K.y,{dataKey:"value",name:n,fill:u.palette.primary.main,children:h.map((e,t)=>(0,i.jsx)(K.y,{dataKey:"value",fill:e.color},"bar-".concat(t)))}),o&&(0,i.jsx)(K.y,{dataKey:"target",name:r,fill:u.palette.secondary.main})]})})})]})};var q=a(78946);let B=()=>{let[e,t]=(0,s.useState)("day"),[a,b]=(0,s.useState)(!0),[v,k]=(0,s.useState)(null),[w,S]=(0,s.useState)([]),[_,W]=(0,s.useState)([]),[z,D]=(0,s.useState)([]),[P,K]=(0,s.useState)([]),[B,L]=(0,s.useState)([]),[T,M]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{b(!0),k(null);try{let t=await q.A.getProductionData(e);S(t);let a=await q.A.getInventoryData();W(a);let i=await q.A.getStaffData();D(i.filter(e=>"B\xe4ckermeister"===e.role||"B\xe4cker"===e.role||"Konditorin"===e.role));let s=await q.A.getTimeSeriesData("production",e);K(s);let n=await q.A.getTimeSeriesData("waste",e);L(n);let r=await q.A.getSummaryData(e);M(r)}catch(e){console.error("Error fetching production data:",e),k("Beim Laden der Produktionsdaten ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{b(!1)}})()},[e]);let C=()=>_.filter(e=>e.quantity<=1.2*e.min_stock_level);return(0,i.jsx)(p.A,{children:a?(0,i.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,i.jsx)(r.A,{})}):(0,i.jsxs)(n.A,{maxWidth:"xl",children:[(0,i.jsxs)(l.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)(d.A,{variant:"h4",component:"h1",children:"Backstube: Produktions\xfcbersicht"}),(0,i.jsx)(f.A,{timeRange:e,onTimeRangeChange:e=>{t(e)}})]}),v&&(0,i.jsx)(c.A,{severity:"error",sx:{mb:4},onClose:()=>{k(null)},children:v}),T&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(y.A,{title:"Gesamtproduktion",value:T.totalProduced,unit:" St\xfcck",icon:(0,i.jsx)(h.A,{}),color:"#4caf50",tooltip:"Gesamtzahl der produzierten Artikel im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(y.A,{title:"Verkaufte Artikel",value:T.totalItems,unit:" St\xfcck",icon:(0,i.jsx)(m.A,{}),color:"#2196f3",tooltip:"Gesamtzahl der verkauften Artikel im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(y.A,{title:"Ausschuss",value:T.totalWaste,unit:" St\xfcck",icon:(0,i.jsx)(x.A,{}),color:"#f44336",tooltip:"Gesamtmenge an Ausschuss im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(y.A,{title:"Ausschussrate",value:T.wastageRate.toFixed(1),unit:"%",icon:(0,i.jsx)(g.A,{}),color:"#ff9800",tooltip:"Prozentsatz der Produktion, der verschwendet wurde"})})]}),C().length>0&&(0,i.jsxs)(c.A,{severity:"warning",sx:{mb:4},children:[(0,i.jsx)(d.A,{variant:"subtitle1",component:"div",sx:{fontWeight:"bold"},children:"Warnung: Niedriger Lagerbestand"}),(0,i.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:C().map(e=>(0,i.jsx)(u.A,{label:"".concat(e.name,": ").concat(e.quantity," ").concat(e.unit," verbleibend"),color:"warning",size:"small"},e.id))})]}),(0,i.jsxs)(o.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(o.Ay,{item:!0,xs:12,md:8,children:(0,i.jsx)(A.A,{title:"Produktion & Ausschuss",subtitle:"Trends f\xfcr Produktion und Ausschuss im Zeitraum: ".concat(e),type:"line",data:(()=>{let e=[],t={};return P.forEach(e=>{t[e.date]={date:e.date,production:e.value,waste:0}}),B.forEach(e=>{t[e.date]?t[e.date].waste=e.value:t[e.date]={date:e.date,production:0,waste:e.value}}),Object.values(t).forEach(t=>e.push(t)),e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),e})(),dataKeys:{x:"date",y:["production","waste"],colors:["#4caf50","#f44336"]},height:300})}),(0,i.jsx)(o.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(A.A,{title:"Produktion nach Kategorie",subtitle:"Verteilung der Produkte nach Kategorie",type:"pie",data:(()=>{let e={};return w.forEach(t=>{let a=t.product_name,i="Sonstiges";a.includes("Brot")||a.includes("Baguette")?i="Brot":a.includes("Kuchen")||a.includes("T\xf6rtchen")?i="Kuchen":a.includes("Geb\xe4ck")||a.includes("Croissant")||a.includes("Br\xf6tchen")?i="Geb\xe4ck":a.includes("Torte")&&(i="Torten"),e[i]=(e[i]||0)+t.quantity_produced}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}})})(),dataKeys:{x:"name",y:"value",colors:["#4caf50","#2196f3","#ff9800","#9c27b0","#607d8b"]},height:300})})]}),(0,i.jsxs)(o.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(E,{title:"Mitarbeiterproduktivit\xe4t",subtitle:"Leistungsmetriken des Backstubenpersonals",data:z.map(e=>({name:e.name,value:e.productivity,target:90,color:e.productivity>=90?"#4caf50":e.productivity>=80?"#ff9800":"#f44336"})),valueLabel:"Produktivit\xe4tswert",targetLabel:"Zielwert",height:300})}),(0,i.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,i.jsx)(j.A,{title:"Bestandsstatus",subtitle:"Aktuelle Lagerbest\xe4nde",columns:[{id:"name",label:"Zutat",minWidth:120},{id:"quantity",label:"Menge",minWidth:80,align:"right"},{id:"unit",label:"Einheit",minWidth:60},{id:"status",label:"Status",minWidth:100,align:"center",format:e=>(0,i.jsx)(u.A,{label:e,color:"Kritisch"===e?"error":"Nachbestellen"===e?"warning":"success",size:"small"})},{id:"last_restocked",label:"Letzte Auff\xfcllung",minWidth:120}],data:_.map(e=>({id:e.id,name:e.name,quantity:e.quantity,unit:e.unit,status:e.quantity<=e.min_stock_level?"Kritisch":e.quantity<=1.5*e.min_stock_level?"Nachbestellen":"OK",last_restocked:new Date(e.last_restocked).toLocaleDateString()})),searchEnabled:!0,emptyMessage:"Keine Bestandsdaten verf\xfcgbar"})})]}),(0,i.jsx)(o.Ay,{container:!0,spacing:3,children:(0,i.jsx)(o.Ay,{item:!0,xs:12,children:(0,i.jsx)(j.A,{title:"Produktionsaufzeichnungen",subtitle:"Detaillierte Produktionsdaten f\xfcr den ausgew\xe4hlten Zeitraum",columns:[{id:"date",label:"Datum",minWidth:100},{id:"product",label:"Produkt",minWidth:150},{id:"quantity",label:"Produziert",minWidth:100,align:"right"},{id:"waste",label:"Ausschuss",minWidth:100,align:"right"},{id:"efficiency",label:"Effizienz",minWidth:100,align:"right",format:e=>{let t=parseFloat(e),a="#4caf50";return t<90&&(a="#ff9800"),t<80&&(a="#f44336"),(0,i.jsx)(d.A,{component:"span",sx:{color:a,fontWeight:"medium"},children:e})}},{id:"staff",label:"Mitarbeiter",minWidth:120}],data:w.map(e=>({id:e.id,date:new Date(e.date).toLocaleDateString(),product:e.product_name,quantity:e.quantity_produced,waste:e.waste,staff:e.staff_name,efficiency:((e.quantity_produced-e.waste)/e.quantity_produced*100).toFixed(1)+"%"})),searchEnabled:!0,emptyMessage:"Keine Produktionsdaten f\xfcr den ausgew\xe4hlten Zeitraum verf\xfcgbar"})})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1091,3266,752,7723,326,746,2502,1580,385,5183,258,953,4865,1314,3831,2729,2480,6748,206,9338,8946,164,8441,1684,7358],()=>t(8896)),_N_E=e.O()}]);