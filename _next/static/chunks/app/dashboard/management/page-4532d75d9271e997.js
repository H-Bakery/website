(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4693],{84195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var i=a(95155),n=a(12115),r=a(63159),s=a(89915),l=a(16150),o=a(9670),c=a(54265),u=a(90746),d=a(35695),m=a(99975),g=a(95372),h=a(66486),x=a(19338),p=a(52661),A=a(43189),f=a(71214),v=a(22657),j=a(25991),y=a(78946);let b=()=>{(0,d.useRouter)();let[e,t]=(0,n.useState)("day"),[a,b]=(0,n.useState)(!0),[w,k]=(0,n.useState)(null),[z,S]=(0,n.useState)(null),[F,C]=(0,n.useState)([]),[D,B]=(0,n.useState)([]),[W,M]=(0,n.useState)([]),[E,G]=(0,n.useState)([]),[N,P]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{b(!0),k(null);try{let t=await y.A.getSummaryData(e);S(t);let a=await y.A.getSummaryData(e);P(a);let i=await y.A.getTimeSeriesData("sales",e);C(i);try{let t=await y.A.getTimeSeriesData("sales",e);B(t)}catch(t){let e=i.map(e=>({...e,value:.35*e.value}));B(e)}let n=await y.A.getProducts();M(n);let r=await y.A.getFinancialData(e);G(r)}catch(e){console.error("Error fetching dashboard data:",e),k("Beim Laden der Daten ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{b(!1)}})()},[e]);let T=(e,t)=>0===t?100*(e>0):(e-t)/t*100;return(0,i.jsx)(x.A,{children:a?(0,i.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,i.jsx)(s.A,{})}):(0,i.jsxs)(r.A,{maxWidth:"xl",children:[(0,i.jsxs)(l.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)(o.A,{variant:"h4",component:"h1",children:"Verwaltung: Finanzkennzahlen"}),(0,i.jsx)(p.A,{timeRange:e,onTimeRangeChange:e=>{t(e)}})]}),w&&(0,i.jsx)(c.A,{severity:"error",sx:{mb:4},onClose:()=>{k(null)},children:w}),z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(A.A,{title:"Gesamtumsatz",value:"".concat(z.revenue.toFixed(2)," €"),icon:(0,i.jsx)(m.A,{}),percentageChange:T(z.revenue,(null==N?void 0:N.revenue)||0),color:"#4caf50",tooltip:"Gesamtumsatz im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(A.A,{title:"Nettogewinn",value:"".concat(z.profit.toFixed(2)," €"),icon:(0,i.jsx)(g.A,{}),percentageChange:T(z.profit,(null==N?void 0:N.profit)||0),color:"#2196f3",tooltip:"Nettogewinn nach allen Ausgaben im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(A.A,{title:"Transaktionen",value:z.transactions,icon:(0,i.jsx)(h.A,{}),percentageChange:T(z.transactions,(null==N?void 0:N.transactions)||0),color:"#ff9800",tooltip:"Anzahl der Verkaufstransaktionen im ausgew\xe4hlten Zeitraum"})}),(0,i.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(A.A,{title:"Gewinnmarge",value:"".concat(z.profitMargin.toFixed(1),"%"),icon:(0,i.jsx)(g.A,{}),percentageChange:T(z.profitMargin,(null==N?void 0:N.profitMargin)||0),color:"#9c27b0",tooltip:"Gewinn als Prozentsatz des Umsatzes"})}),(0,i.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,i.jsx)(A.A,{title:"Durchsch. Bestellwert",value:"".concat(z.averageOrderValue.toFixed(2)," €"),icon:(0,i.jsx)(m.A,{}),percentageChange:T(z.averageOrderValue,(null==N?void 0:N.averageOrderValue)||0),color:"#f44336",tooltip:"Durchschnittlicher Wert pro Transaktion"})})]}),(0,i.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(u.Ay,{item:!0,xs:12,md:8,children:(0,i.jsx)(f.A,{title:"Umsatzentwicklung",subtitle:"Umsatzentwicklung f\xfcr den ausgew\xe4hlten Zeitraum: ".concat(e),type:"area",data:F,dataKeys:{x:"date",y:["value"],colors:["#4caf50"]},height:300})}),(0,i.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(j.A,{title:"Finanzielle Leistung",subtitle:"Vergleich mit vorherigem Zeitraum",previousPeriodLabel:"vorheriger ".concat(e),items:[{label:"Umsatz",current:z.revenue,previous:(null==N?void 0:N.revenue)||0,unit:"€",color:"#4caf50",isHigherBetter:!0},{label:"Ausgaben",current:z.expenses,previous:(null==N?void 0:N.expenses)||0,unit:"€",color:"#f44336",isHigherBetter:!1},{label:"Nettogewinn",current:z.profit,previous:(null==N?void 0:N.profit)||0,unit:"€",color:"#2196f3",isHigherBetter:!0},{label:"Gewinnmarge",current:z.profitMargin,previous:(null==N?void 0:N.profitMargin)||0,unit:"%",color:"#9c27b0",isHigherBetter:!0}]})})]}),(0,i.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,i.jsx)(u.Ay,{item:!0,xs:12,md:5,children:(0,i.jsx)(f.A,{title:"Produktleistung",subtitle:"Top-Produkte nach Gewinnmarge",type:"bar",data:W.filter(e=>e.cost>0).map(e=>({name:e.name,profit:e.price-e.cost,margin:(e.price-e.cost)/e.price*100})).sort((e,t)=>t.margin-e.margin).slice(0,5),dataKeys:{x:"name",y:"margin",colors:["#3f51b5"]},height:350})}),(0,i.jsx)(u.Ay,{item:!0,xs:12,md:7,children:(0,i.jsx)(v.A,{title:"Finanztransaktionen",subtitle:"Aktuelle finanzielle Aktivit\xe4ten",columns:[{id:"date",label:"Datum",minWidth:100},{id:"category",label:"Kategorie",minWidth:150},{id:"amount",label:"Betrag",minWidth:120,align:"right",format:e=>{let t=e.startsWith("-");return(0,i.jsx)(o.A,{component:"span",sx:{color:t?"#f44336":"#4caf50",fontWeight:"medium"},children:e})}},{id:"description",label:"Beschreibung",minWidth:200}],data:E.map(e=>({id:e.id,date:new Date(e.date).toLocaleDateString(),category:e.category,amount:"".concat(e.amount<0?"-":"").concat(Math.abs(e.amount).toFixed(2)," €"),description:e.description})),searchEnabled:!0,emptyMessage:"Keine Finanzdaten f\xfcr den ausgew\xe4hlten Zeitraum verf\xfcgbar"})})]})]})]})})}},90428:(e,t,a)=>{Promise.resolve().then(a.bind(a,84195))}},e=>{var t=t=>e(e.s=t);e.O(0,[1091,3266,752,7723,326,746,2502,1580,385,5183,258,953,4865,1314,3831,2729,2480,6748,206,9338,8946,164,3174,8441,1684,7358],()=>t(90428)),_N_E=e.O()}]);